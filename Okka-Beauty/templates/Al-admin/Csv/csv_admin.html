{% extends 'Al-admin/base/base.html' %} {% load static %}{% block title %}my webpage{% endblock %} {% block body %} {% load static %}
{% get_media_prefix as MEDIA_PREFIX %}
<style>
  #popup-message {
      display: none;
      position: fixed;
      top: 20px; /* Updated to display at the top */
      left: 50%;
      transform: translateX(-50%);
      padding: 10px 20px;
      background-color: #333; /* Updated to dark background color */
      color: #fff;
      border-radius: 5px;
      z-index: 9999;
  }

  #popup-message.success {
      background-color: #28a745; /* Green color for success */
  }

  #popup-message .icon {
      margin-right: 10px;
  }
</style>
<style>
  .page-link.active {
  background-color: #3874FF;
  color: #fff;
}
</style>
<main class="main" id="top">
    
      <div class="container-fluid px-0">
        <nav class="navbar navbar-vertical navbar-expand-lg">
          <script>
            var navbarStyle = window.config.config.phoenixNavbarStyle;
            if (navbarStyle && navbarStyle !== 'transparent') {
              document.querySelector('body').classList.add(`navbar-${navbarStyle}`);
            }
          </script>
          <div class="collapse navbar-collapse" id="navbarVerticalCollapse">
            <!-- scrollbar removed-->
            <div class="navbar-vertical-content">
              <ul class="navbar-nav flex-column" id="navbarVerticalNav">
              
                <li class="nav-item"><a class="nav-link" href="{% url 'Dashboard' %}" data-bs-toggle="" aria-expanded="false">
                  <div class="d-flex align-items-center gap-2"><span data-feather="codesandbox"></span><span class="nav-link-text">Dashboard</span>
                  </div>
                </a>
                <!-- more inner pages-->
              </li>
  
              <li class="nav-item">
              
                <div class="nav-item-wrapper">
                  <a class="nav-link dropdown-indicator label-1" href="#Banner" role="button" data-bs-toggle="collapse" aria-expanded="true" aria-controls="Banner">
                    <div class="d-flex align-items-center">
                      <div class="dropdown-indicator-icon"><span class="fas fa-caret-right"></span></div><span class="nav-link-icon"><span data-feather="image"></span></span><span class="nav-link-text">Banner Management</span>
                    </div>
                  </a>
                  <div class="parent-wrapper label-1">
                    <ul class="nav collapse parent show" data-bs-parent="#navbarVerticalCollapse" id="Banner">
                      <li class="collapsed-nav-item-title d-none">Banner Management
                      </li>
                      {% if request.user.is_authenticated %} {% if perms.banners.view_mainbanner  %}
                      <li class="nav-item"><a class="nav-link " href="{% url 'Buy-Promo-Banner' %}" data-bs-toggle="" aria-expanded="false">
                        <div class="d-flex align-items-center"><span class="nav-link-text">Main Banner</span>
                        </div>
                      </a>
                      <!-- more inner pages-->
                    </li>  
                    {% else %} {% for group in request.user.groups.all %} {% if perms.group.view_mainbanner  %}
                    <li class="nav-item"><a class="nav-link " href="{% url 'Buy-Promo-Banner' %}" data-bs-toggle="" aria-expanded="false">
                      <div class="d-flex align-items-center"><span class="nav-link-text">Main Banner</span>
                      </div>
                    </a>
                    <!-- more inner pages-->
                  </li>  
                  {% endif %} {% endfor %} {% endif %} {% endif %}
  
                  {% if request.user.is_authenticated %} {% if perms.banners.view_offer_banner %} <li class="nav-item">
                    <a class="nav-link " href="{% url 'pricebanner' %}" data-bs-toggle="" aria-expanded="false">
                      <div class="d-flex align-items-center">
                        <span class="nav-link-text">Price Banner</span>
                      </div>
                    </a>
                    <!-- more inner pages-->
                  </li> {% else %} {% for group in request.user.groups.all %} {% if perms.group.view_offer_banner %} <li class="nav-item">
                    <a class="nav-link " href="{% url 'pricebanner' %}" data-bs-toggle="" aria-expanded="false">
                      <div class="d-flex align-items-center">
                        <span class="nav-link-text">Price Banner</span>
                      </div>
                    </a>
                    <!-- more inner pages-->
                  </li> {% endif %} {% endfor %} {% endif %} {% endif %}
                     
                  {% if request.user.is_authenticated %} {% if perms.banners.view_mainbanner %} <li class="nav-item">
                    <a class="nav-link " href="{% url 'footerbanner' %}" data-bs-toggle="" aria-expanded="false">
                      <div class="d-flex align-items-center">
                        <span class="nav-link-text">Footer Banner</span>
                      </div>
                    </a>
                    <!-- more inner pages-->
                  </li> {% else %} {% for group in request.user.groups.all %} {% if perms.group.view_mainbanner %} <li class="nav-item">
                    <a class="nav-link " href="{% url 'footerbanner' %}" data-bs-toggle="" aria-expanded="false">
                      <div class="d-flex align-items-center">
                        <span class="nav-link-text">Footer Banner</span>
                      </div>
                    </a>
                    <!-- more inner pages-->
                  </li> {% endif %} {% endfor %} {% endif %} {% endif %}      
                    </ul>
                  </div>
                </div>
              </li>
  
              <li class="nav-item">
              
                <div class="nav-item-wrapper">
                  <a class="nav-link dropdown-indicator label-1" href="#customer" role="button" data-bs-toggle="collapse" aria-expanded="true" aria-controls="customer">
                    <div class="d-flex align-items-center">
                      <div class="dropdown-indicator-icon"><span class="fas fa-caret-right"></span></div><span class="nav-link-icon"><span data-feather="users"></span></span><span class="nav-link-text">Customer Management</span>
                    </div>
                  </a>
                  <div class="parent-wrapper label-1">
                    <ul class="nav collapse parent show" data-bs-parent="#navbarVerticalCollapse" id="customer">
                      <li class="collapsed-nav-item-title d-none">Customer Management
                      </li>
                      {% if request.user.is_authenticated %} {% if perms.user.view_user %} <li class="nav-item">
                        <a class="nav-link " href="{% url 'customer' %}" data-bs-toggle="" aria-expanded="false">
                          <div class="d-flex align-items-center">
                            <span class="nav-link-text">All Customer</span>
                          </div>
                        </a>
                        <!-- more inner pages-->
                      </li> {% else %} {% for group in request.user.groups.all %} {% if perms.group.view_user %} <li class="nav-item">
                        <a class="nav-link " href="{% url 'customer' %}" data-bs-toggle="" aria-expanded="false">
                          <div class="d-flex align-items-center">
                            <span class="nav-link-text">All Customer</span>
                          </div>
                        </a>
                        <!-- more inner pages-->
                      </li> {% endif %} {% endfor %} {% endif %} {% endif %}                  
                    </ul>
                  </div>
                </div>
              </li>
  
              <li class="nav-item">
              
                <div class="nav-item-wrapper">
                  <a class="nav-link dropdown-indicator label-1" href="#Product" role="button" data-bs-toggle="collapse" aria-expanded="true" aria-controls="Product">
                    <div class="d-flex align-items-center">
                      <div class="dropdown-indicator-icon"><span class="fas fa-caret-right"></span></div><span class="nav-link-icon"><span data-feather="shopping-cart"></span></span><span class="nav-link-text">Product Management</span>
                    </div>
                  </a>
                  <div class="parent-wrapper label-1">
                    <ul class="nav collapse parent show" data-bs-parent="#navbarVerticalCollapse" id="Product">
                      <li class="collapsed-nav-item-title d-none">Product Management
                      </li>
                      {% if request.user.is_authenticated %} {% if perms.products.view_products %} <li class="nav-item">
                        <a class="nav-link " href="{% url 'product-list' %}" data-bs-toggle="" aria-expanded="false">
                          <div class="d-flex align-items-center">
                            <span class="nav-link-text">All Products</span>
                          </div>
                        </a>
                        <!-- more inner pages-->
                      </li> {% else %} {% for group in request.user.groups.all %} {% if perms.group.view_products %} <li class="nav-item">
                        <a class="nav-link " href="{% url 'product-list' %}" data-bs-toggle="" aria-expanded="false">
                          <div class="d-flex align-items-center">
                            <span class="nav-link-text">All Products</span>
                          </div>
                        </a>
                        <!-- more inner pages-->
                      </li> {% endif %} {% endfor %} {% endif %} {% endif %}
                      {% if request.user.is_authenticated %} {% if perms.products.add_products %} <li class="nav-item">
                        <a class="nav-link" href="{% url 'product-adding' %}" data-bs-toggle="" aria-expanded="false">
                          <div class="d-flex align-items-center">
                            <span class="nav-link-text">Add Product</span>
                          </div>
                        </a>
                        <!-- more inner pages-->
                      </li> {% else %} {% for group in request.user.groups.all %} {% if perms.group.add_products %} <li class="nav-item">
                        <a class="nav-link" href="{% url 'product-adding' %}" data-bs-toggle="" aria-expanded="false">
                          <div class="d-flex align-items-center">
                            <span class="nav-link-text">Add Product</span>
                          </div>
                        </a>
                        <!-- more inner pages-->
                      </li> {% endif %} {% endfor %} {% endif %} {% endif %}
                      {% if request.user.is_authenticated %} {% if perms.products.view_category %} <li class="nav-item">
                        <a class="nav-link" href="{% url 'category-admin' %}" data-bs-toggle="" aria-expanded="false">
                          <div class="d-flex align-items-center">
                            <span class="nav-link-text">Categories</span>
                          </div>
                        </a>
                        <!-- more inner pages-->
                      </li> {% else %} {% for group in request.user.groups.all %} {% if perms.group.view_category %} <li class="nav-item">
                        <a class="nav-link" href="{% url 'category-admin' %}" data-bs-toggle="" aria-expanded="false">
                          <div class="d-flex align-items-center">
                            <span class="nav-link-text">Categories</span>
                          </div>
                        </a>
                        <!-- more inner pages-->
                      </li> {% endif %} {% endfor %} {% endif %} {% endif %}
                      {% if request.user.is_authenticated %} {% if perms.products.view_subcategory %} <li class="nav-item">
                        <a class="nav-link" href="{% url 'subcategory-admin' %}" data-bs-toggle="" aria-expanded="false">
                          <div class="d-flex align-items-center">
                            <span class="nav-link-text">Sub Categories</span>
                          </div>
                        </a>
                        <!-- more inner pages-->
                      </li> {% else %} {% for group in request.user.groups.all %} {% if perms.group.view_subcategory %} <li class="nav-item">
                        <a class="nav-link" href="{% url 'subcategory-admin' %}" data-bs-toggle="" aria-expanded="false">
                          <div class="d-flex align-items-center">
                            <span class="nav-link-text">Sub Categories</span>
                          </div>
                        </a>
                        <!-- more inner pages-->
                      </li> {% endif %} {% endfor %} {% endif %} {% endif %}
                      {% if request.user.is_authenticated %} {% if perms.products.view_brand %} <li class="nav-item">
                        <a class="nav-link" href="{% url 'brand-admin' %}" data-bs-toggle="" aria-expanded="false">
                          <div class="d-flex align-items-center">
                            <span class="nav-link-text">Brand</span>
                          </div>
                        </a>
                        <!-- more inner pages-->
                      </li> {% else %} {% for group in request.user.groups.all %} {% if perms.group.view_brand %} <li class="nav-item">
                        <a class="nav-link" href="{% url 'brand-admin' %}" data-bs-toggle="" aria-expanded="false">
                          <div class="d-flex align-items-center">
                            <span class="nav-link-text">Brand</span>
                          </div>
                        </a>
                        <!-- more inner pages-->
                      </li> {% endif %} {% endfor %} {% endif %} {% endif %}
                      {% if request.user.is_authenticated %} {% if perms.products.view_attribute %} <li class="nav-item">
                        <a class="nav-link" href="{% url 'attribute-admin' %}" data-bs-toggle="" aria-expanded="false">
                          <div class="d-flex align-items-center">
                            <span class="nav-link-text">Attribute</span>
                          </div>
                        </a>
                        <!-- more inner pages-->
                      </li> {% else %} {% for group in request.user.groups.all %} {% if perms.group.view_attribute %} <li class="nav-item">
                        <a class="nav-link" href="{% url 'attribute-admin' %}" data-bs-toggle="" aria-expanded="false">
                          <div class="d-flex align-items-center">
                            <span class="nav-link-text">Attribute</span>
                          </div>
                        </a>
                        <!-- more inner pages-->
                      </li> {% endif %} {% endfor %} {% endif %} {% endif %}
                    </ul>
                  </div>
                </div>
              </li>
  
  
                <li class="nav-item">
              
                  <div class="nav-item-wrapper">
                    <a class="nav-link dropdown-indicator label-1" href="#Order" role="button" data-bs-toggle="collapse" aria-expanded="true" aria-controls="Order">
                      <div class="d-flex align-items-center">
                        <div class="dropdown-indicator-icon"><span class="fas fa-caret-right"></span></div><span class="nav-link-icon"><span data-feather="truck"></span></span><span class="nav-link-text">Order Management</span>
                      </div>
                    </a>
                    <div class="parent-wrapper label-1">
                      <ul class="nav collapse parent show" data-bs-parent="#navbarVerticalCollapse" id="Order">
                        <li class="collapsed-nav-item-title d-none">Order Management
                        </li>
                        {% if request.user.is_authenticated %} {% if perms.checkout.view_user_order %} <li class="nav-item">
                          <a class="nav-link" href="{% url 'admin-order' %}" data-bs-toggle="" aria-expanded="false">
                            <div class="d-flex align-items-center">
                              <span class="nav-link-text">Orders</span>
                            </div>
                          </a>
                          <!-- more inner pages-->
                        </li> {% else %} {% for group in request.user.groups.all %} {% if perms.group.view_user_order %} <li class="nav-item">
                          <a class="nav-link" href="{% url 'admin-order' %}" data-bs-toggle="" aria-expanded="false">
                            <div class="d-flex align-items-center">
                              <span class="nav-link-text">Orders</span>
                            </div>
                          </a>
                          <!-- more inner pages-->
                        </li> {% endif %} {% endfor %} {% endif %} {% endif %}
                        {% if request.user.is_authenticated %} {% if perms.checkout.view_orderdeliveryperson %} <li class="nav-item">
                          <a class="nav-link" href="{% url 'delivery_person' %}" data-bs-toggle="" aria-expanded="false">
                            <div class="d-flex align-items-center">
                              <span class="nav-link-text">Delivery Person</span>
                            </div>
                          </a>
                          <!-- more inner pages-->
                        </li> {% else %} {% for group in request.user.groups.all %} {% if perms.group.view_orderdeliveryperson %} <li class="nav-item">
                          <a class="nav-link" href="{% url 'delivery_person' %}" data-bs-toggle="" aria-expanded="false">
                            <div class="d-flex align-items-center">
                              <span class="nav-link-text">Delivery Person</span>
                            </div>
                          </a>
                          <!-- more inner pages-->
                        </li> {% endif %} {% endfor %} {% endif %} {% endif %}
  
                        {% if request.user.is_authenticated %} {% if perms.checkout.view_orderreplacementcomment %} <li class="nav-item">
                          <a class="nav-link" href="{% url 'order-replace-page' %}" data-bs-toggle="" aria-expanded="false">
                            <div class="d-flex align-items-center">
                              <span class="nav-link-text">Replacement Orders</span>
                            </div>
                          </a>
                          <!-- more inner pages-->
                        </li> {% else %} {% for group in request.user.groups.all %} {% if perms.group.view_orderreplacementcomment %} <li class="nav-item">
                          <a class="nav-link" href="{% url 'order-replace-page' %}" data-bs-toggle="" aria-expanded="false">
                            <div class="d-flex align-items-center">
                              <span class="nav-link-text">Replacement Orders</span>
                            </div>
                          </a>
                          <!-- more inner pages-->
                        </li> {% endif %} {% endfor %} {% endif %} {% endif %}
  
  
                        {% if request.user.is_authenticated %} {% if perms.checkout.view_replacementcollectperson %} <li class="nav-item">
                          <a class="nav-link" href="{% url 'replacement_person' %}" data-bs-toggle="" aria-expanded="false">
                            <div class="d-flex align-items-center">
                              <span class="nav-link-text">Re-Collection Person</span>
                            </div>
                          </a>
                          <!-- more inner pages-->
                        </li> {% else %} {% for group in request.user.groups.all %} {% if perms.group.view_replacementcollectperson %} <li class="nav-item">
                          <a class="nav-link" href="{% url 'replacement_person' %}" data-bs-toggle="" aria-expanded="false">
                            <div class="d-flex align-items-center">
                              <span class="nav-link-text">Re-Collection Person</span>
                            </div>
                          </a>
                          <!-- more inner pages-->
                        </li> {% endif %} {% endfor %} {% endif %} {% endif %}
                    <li class="nav-item"><a class="nav-link" href="{% url 'product-adding' %}" data-bs-toggle="" aria-expanded="false">
                        <div class="d-flex align-items-center"><span class="nav-link-text">Abandoned cart</span>
                        </div>
                      </a>
                      <!-- more inner pages-->
                    </li>
                      </ul>
                    </div>
                  </div>
                </li>
  
  
                <li class="nav-item">
              
                  <div class="nav-item-wrapper">
                    <a class="nav-link dropdown-indicator label-1" href="#Coupon" role="button" data-bs-toggle="collapse" aria-expanded="true" aria-controls="Coupon">
                      <div class="d-flex align-items-center">
                        <div class="dropdown-indicator-icon"><span class="fas fa-caret-right"></span></div><span class="nav-link-icon"><span data-feather="tag"></span></span><span class="nav-link-text">Coupon</span>
                      </div>
                    </a>
                    <div class="parent-wrapper label-1">
                      <ul class="nav collapse parent show" data-bs-parent="#navbarVerticalCollapse" id="Coupon">
                        <li class="collapsed-nav-item-title d-none">Coupon
                        </li>
                        {% if request.user.is_authenticated %} {% if perms.products.view_coupon %} <li class="nav-item">
                          <a class="nav-link" href="{% url 'coupon' %}" data-bs-toggle="" aria-expanded="false">
                            <div class="d-flex align-items-center">
                              <span class="nav-link-text">All Coupon</span>
                            </div>
                          </a>
                          <!-- more inner pages-->
                        </li> {% else %} {% for group in request.user.groups.all %} {% if perms.group.view_coupon %} <li class="nav-item">
                          <a class="nav-link" href="{% url 'coupon' %}" data-bs-toggle="" aria-expanded="false">
                            <div class="d-flex align-items-center">
                              <span class="nav-link-text">All Coupon</span>
                            </div>
                          </a>
                          <!-- more inner pages-->
                        </li> {% endif %} {% endfor %} {% endif %} {% endif %}
                        {% if request.user.is_authenticated %} {% if perms.products.view_couponusage %} <li class="nav-item">
                          <a class="nav-link" href="{% url 'couponUseage' %}" data-bs-toggle="" aria-expanded="false">
                            <div class="d-flex align-items-center">
                              <span class="nav-link-text">Coupon Useage</span>
                            </div>
                          </a>
                          <!-- more inner pages-->
                        </li> {% else %} {% for group in request.user.groups.all %} {% if perms.group.view_couponusage %} <li class="nav-item">
                          <a class="nav-link" href="{% url 'couponUseage' %}" data-bs-toggle="" aria-expanded="false">
                            <div class="d-flex align-items-center">
                              <span class="nav-link-text">Coupon Useage</span>
                            </div>
                          </a>
                          <!-- more inner pages-->
                        </li> {% endif %} {% endfor %} {% endif %} {% endif %}
                      </ul>
                    </div>
                  </div>
                </li>
  
                <li class="nav-item">
              
                  <div class="nav-item-wrapper">
                    <a class="nav-link dropdown-indicator label-1" href="#CSV" role="button" data-bs-toggle="collapse" aria-expanded="true" aria-controls="CSV">
                      <div class="d-flex align-items-center">
                        <div class="dropdown-indicator-icon"><span class="fas fa-caret-right"></span></div><span class="nav-link-icon"><span data-feather="file-text"></span></span><span class="nav-link-text">CSV Management</span>
                      </div>
                    </a>
                    <div class="parent-wrapper label-1">
                      <ul class="nav collapse parent show" data-bs-parent="#navbarVerticalCollapse" id="CSV">
                        <li class="collapsed-nav-item-title d-none">CSV Management
                        </li>
                        {% if request.user.is_authenticated %} {% if perms.csvdata.view_csv_creation %} <li class="nav-item">
                          <a class="nav-link active" href="3" data-bs-toggle="" aria-expanded="false">
                            <div class="d-flex align-items-center">
                              <span class="nav-link-text">Csv Data</span>
                            </div>
                          </a>
                          <!-- more inner pages-->
                        </li> {% else %} {% for group in request.user.groups.all %} {% if perms.group.view_csv_creation %} <li class="nav-item">
                          <a class="nav-link active" href="3" data-bs-toggle="" aria-expanded="false">
                            <div class="d-flex align-items-center">
                              <span class="nav-link-text">Csv Data</span>
                            </div>
                          </a>
                          <!-- more inner pages-->
                        </li> {% endif %} {% endfor %} {% endif %} {% endif %}
                      </ul>
                    </div>
                  </div>
                </li>
  
                <li class="nav-item">
              
                  <div class="nav-item-wrapper">
                    <a class="nav-link dropdown-indicator label-1" href="#User" role="button" data-bs-toggle="collapse" aria-expanded="true" aria-controls="User">
                      <div class="d-flex align-items-center">
                        <div class="dropdown-indicator-icon"><span class="fas fa-caret-right"></span></div><span class="nav-link-icon"><span data-feather="user-check"></span></span><span class="nav-link-text">User Management</span>
                      </div>
                    </a>
                    <div class="parent-wrapper label-1">
                      <ul class="nav collapse parent show" data-bs-parent="#navbarVerticalCollapse" id="User">
                        <li class="collapsed-nav-item-title d-none">User Management
                        </li>
                        {% if request.user.is_authenticated %} {% if perms.auth.view_group %} <li class="nav-item">
                          <a class="nav-link" href="{% url 'group' %}" data-bs-toggle="" aria-expanded="false">
                            <div class="d-flex align-items-center">
                              <span class="nav-link-text">User Role</span>
                            </div>
                          </a>
                          <!-- more inner pages-->
                        </li> {% else %} {% for group in request.user.groups.all %} {% if perms.group.view_group %} <li class="nav-item">
                          <a class="nav-link" href="{% url 'group' %}" data-bs-toggle="" aria-expanded="false">
                            <div class="d-flex align-items-center">
                              <span class="nav-link-text">User Role</span>
                            </div>
                          </a>
                          <!-- more inner pages-->
                        </li> {% endif %} {% endfor %} {% endif %} {% endif %}
                      </ul>
                    </div>
                  </div>
                </li>
  
                <li class="nav-item">
              
                  <div class="nav-item-wrapper">
                    <a class="nav-link dropdown-indicator label-1" href="#Report" role="button" data-bs-toggle="collapse" aria-expanded="true" aria-controls="Report">
                      <div class="d-flex align-items-center">
                        <div class="dropdown-indicator-icon"><span class="fas fa-caret-right"></span></div><span class="nav-link-icon"><span data-feather="file-text"></span></span><span class="nav-link-text">Report</span>
                      </div>
                    </a>
                    <div class="parent-wrapper label-1">
                      <ul class="nav collapse parent show" data-bs-parent="#navbarVerticalCollapse" id="Report">
                        <li class="collapsed-nav-item-title d-none">Report
                        </li>
                        <li class="nav-item">
                          <a class="nav-link" href="{% url 'generate_order_report' %}" data-bs-toggle="" aria-expanded="false">
                            <div class="d-flex align-items-center">
                              <span class="nav-link-text">Order</span>
                            </div>
                          </a>
                          <!-- more inner pages-->
                        </li>
                        <li class="nav-item">
                          <a class="nav-link" href="{% url 'generate_invoice_report' %}" data-bs-toggle="" aria-expanded="false">
                            <div class="d-flex align-items-center">
                              <span class="nav-link-text">Invoice</span>
                            </div>
                          </a>
                          <!-- more inner pages-->
                        </li>
                        <li class="nav-item">
                          <a class="nav-link" href="{% url 'generate_order_shipping_report' %}" data-bs-toggle="" aria-expanded="false">
                            <div class="d-flex align-items-center">
                              <span class="nav-link-text">Shipping</span>
                            </div>
                          </a>
                          <!-- more inner pages-->
                        </li>
                        <li class="nav-item">
                          <a class="nav-link" href="{% url 'generate_coupon_report' %}" data-bs-toggle="" aria-expanded="false">
                            <div class="d-flex align-items-center">
                              <span class="nav-link-text">Coupon</span>
                            </div>
                          </a>
                          <!-- more inner pages-->
                        </li>
                        <li class="nav-item">
                          <a class="nav-link" href="{% url 'product-adding' %}" data-bs-toggle="" aria-expanded="false">
                            <div class="d-flex align-items-center">
                              <span class="nav-link-text">Abandoned Cart</span>
                            </div>
                          </a>
                          <!-- more inner pages-->
                        </li>
                      </ul>
                    </div>
                  </div>
                </li>
              </ul>
            </div>
          </div>
          <div class="navbar-vertical-footer">
            <button class="btn navbar-vertical-toggle border-0 fw-semi-bold w-100 white-space-nowrap d-flex align-items-center"><span class="uil uil-left-arrow-to-left fs-0"></span><span class="uil uil-arrow-from-right fs-0"></span><span class="navbar-vertical-footer-text ms-2">Collapsed View</span></button>
          </div>
        </nav>
        {% include 'Al-admin/base/nav.html' %}
        <div class="content">
          <div id="popup-message">
            <span class="icon">✔</span> <!-- Green success icon -->
            <span id="popup-message-text"></span>
          </div>
          <div class="mb-9">
            <div class="row g-3 mb-4">
              <div class="col-auto">
                <h2 class="mb-0">CSV Admin</h2>
              </div>
            </div>
            </div>

            
            <div id="products" data-list='{"valueNames":["product","price","category","tags","vendor","time"],"page":15,"pagination":true}'>
              <div class="mb-4">
                <div class="row g-3">
                  <!-- <div class="col-auto">
                    <div class="search-box">
                      <form class="position-relative" data-bs-toggle="search" data-bs-display="static">
                        <input class="form-control search-input search" type="search" placeholder="Search products" aria-label="Search" />
                        <span class="fas fa-search search-box-icon"></span>

                      </form>
                    </div>
                  </div>
                  <div class="col-auto">
                    <select class="form-select filter-dropdown" data-filter="category" aria-label="Default select example">
                      <option selected="" disabled>select category</option>
                      {% for categories in categories %}
                      <option value="{{categories.name}}">{{categories.name}}</option>
                      {% endfor %}
                    </select>
                  </div>  
                  <div class="col-auto">
                    <select class="form-select filter-dropdown" data-filter="subcategory" aria-label="Default select example">
                      <option selected="" disabled>select Sub category</option>
                      {% for subCategories in subCategories %}
                      <option value="{{subCategories.name}}">{{subCategories.name}}</option>
                      {% endfor %}
                    </select>
                  </div>       
                  <div class="col-auto">
                    <select class="form-select filter-dropdown" data-filter="brand" aria-label="Default select example">
                      <option selected="" disabled>select Brand</option>
                      {% for brand in brand %}
                      <option value="{{brand.name}}">{{brand.name}}</option>
                      {% endfor %}
                    </select>
                  </div>  
                  <div class="col-auto">
                    <select class="form-select filter-dropdown" data-filter="status" aria-label="Default select example">
                      <option selected="" disabled>select Status</option>                      
                      <option value="Instock">Instock</option>
                      <option value="Out of Stock">Out of Stock</option>
                    </select>
                  </div>    -->
                  <div class="col">
                    <form class="row g-3" method="get">
                      <div class="col-auto">
                        <div class="custom-form-container">
                            {{ filter.form.search }}
                        </div>
                    </div>
                      <div class="col-auto">                    
                        {{ filter.form.badge_no }}                                        
                    </div> 
                    <div class="col-auto">
                      <button class="btn btn-primary border-300 px-3" type="submit">Filter</button>
                    </div>
                    </form>
                  </div>  
                  
                  
                </div>
              </div>
              <div class="mb-4">
                <div class="row g-3">
                    <!-- <div class="col-auto ms-auto">
                        <button class="btn btn-primary mb-1" type="button" id="save-continue"><span class="fas fa-plus me-2"></span>Save & Continue</button>
                      </div> -->
                      {% if request.user.is_authenticated %} {% if perms.csvdata.add_csv_creation %} <div class="col-auto ms-auto">
                        <a href="{% url 'csv-filecreation' %}" class="btn btn-primary mb-1" type="button" id="save-continue">
                          <span class="fas fa-plus me-2"></span>Create Csv </a>
                      </div> {% else %} {% for group in request.user.groups.all %} {% if perms.group.add_csv_creation %} <div class="col-auto ms-auto">
                        <a href="{% url 'csv-filecreation' %}" class="btn btn-primary mb-1" type="button" id="save-continue">
                          <span class="fas fa-plus me-2"></span>Create Csv </a>
                      </div> {% endif %} {% endfor %} {% endif %} {% endif %}
                      <div class="col-auto d-flex">
                        <select class="form-select form-select-sm me-3 export-badge" aria-label=".form-select-sm example">
                          <option selected="" disabled>Select Badge To Export</option>
                          {% for Badge in Badge %} <option value="{{Badge.badge}}">{{Badge.badge}}</option> {% endfor %} 
                        </select>
                        <button class="btn btn-primary mb-1 w-100" type="button" id="export-table"><span class="fas fa-file-export me-2"></span>Export Products</button>
                      </div>
                      
                    <!-- <div class="col-auto ms-auto">
                        <button class="btn btn-primary mb-1" type="button" id="export-csv"><span class="fas fa-plus me-2"></span>Export CSV</button>
                    </div> -->
                </div>
                
            </div>
            {% if request.user.is_authenticated %} {% if perms.csvdata.view_csv_creation %} <div class="mx-n4 px-4 mx-lg-n6 px-lg-6 bg-white border-top border-bottom border-200 position-relative top-1">
              <div class="table-responsive scrollbar mx-n1 px-1">
                <table class="table fs--1 mb-0">
                  <thead>
                    <tr>
                      <th class="white-space-nowrap fs--1 align-middle ps-0" style="max-width:20px; width:18px;">
                        <div class="form-check mb-0 fs-0">
                          <input class="form-check-input" id="checkbox-bulk-products-select" type="checkbox" data-bulk-select='{"body":"products-table-body"}' />
                        </div>
                      </th>
                      <!-- <th class="sort white-space-nowrap align-middle fs--2" scope="col" style="width:70px;"></th> -->
                      <th class="sort white-space-nowrap align-middle ps-4" scope="col" style="width:350px;" data-sort="product">PRODUCT NAME</th>
                      <th class="sort align-middle text-end ps-4" scope="col" data-sort="price" style="width:150px;">PRODUCT SKU</th>
                      <th class="sort align-middle text-end ps-4" scope="col" data-sort="model" style="width:200px;">PRODUCT MODEL</th>
                      <th class="sort align-middle ps-4" scope="col" data-sort="category" style="width:150px;">CATEGORY</th>
                      <th class="sort align-middle ps-3" scope="col" data-sort="tags" style="width:250px;">SUB CATEGORY</th>
                      <th class="sort align-middle fs-0 text-center ps-4" scope="col" style="width:125px;">BRAND</th>
                      <th class="sort align-middle ps-4" scope="col" data-sort="vendor" style="width:200px;">NO STOCK IN</th>
                      <th class="sort text-center align-middle pe-0 ps-4" scope="col">PRICE</th>
                      <th class="sort text-center align-middle pe-0 ps-4" scope="col">STOCK STATUS</th>
                      <th class="sort align-middle ps-4" scope="col" data-sort="image" style="width:50px;">images</th>
                      <th class="sort text-center align-middle pe-0 ps-4" scope="col">badge_no</th>
                      <th class="sort text-center align-middle pe-0 ps-4" scope="col">item_no</th>
                      <th class="sort text-center align-middle pe-0 ps-4" scope="col">Action</th>
                    </tr>
                  </thead>
                  <tbody class="list" id="products-table-body"> {% for product in csv_Creation_data %} <tr class="position-static" data-product-id="{{ product.id }}">
                      <td class="fs--1 align-middle">
                        <div class="form-check mb-0 fs-0">
                          <input class="form-check-input" type="checkbox" data-bulk-select-row='{"product":"Fitbit Sense Advanced Smartwatch with Tools for Heart Health, Stress Management & Skin Temperature Trends, Carbon/Graphite, One Size (S & L Bands...","productImage":"/products/1.png","price":"$39","category":"Plants","tags":["Health","Exercise","Discipline","Lifestyle","Fitness"],"star":false,"vendor":"Blue Olive Plant sellers. Inc","publishedOn":"Nov 12, 10:45 PM"}' />
                        </div>
                      </td>
                      <!-- <td class="align-middle white-space-nowrap py-0"><div class="border rounded-2"><img src="{{ MEDIA_PREFIX }}{{product.product_Image1}}" alt="" width="53" /></div></td> -->
                      <td class="product align-middle ps-4">
                        <a class="fw-semi-bold line-clamp-3 mb-0" href="{% url 'product_update' product.id %}">{{product.product_name}}</a>
                      </td>
                      <td class="sku text-center white-space-nowrap text-end fw-bold text-700 ps-4">{{product.product_sku}}</td>
                      <td class="model text-center white-space-nowrap text-end fw-bold text-700 ps-4">{{product.model_number}}</td>
                      <td class="category text-center white-space-nowrap text-600 fs--1 ps-4 fw-semi-bold">{{product.category_name}}</td>
                      <td class="sub_category text-center white-space-nowrap text-600 fs--1 ps-4 fw-semi-bold">{{product.sub_category_name}}</td>
                      </td>
                      <td class="brand text-center white-space-nowrap text-600 fs--1 ps-4 fw-semi-bold">{{product.brand_name}}</td>
                      <td class="stackin text-center white-space-nowrap text-600 fs--1 ps-4 fw-semi-bold">{{product.number_of_stock_in}}</td>
                      <!-- <td class="stackout text-center white-space-nowrap text-600 fs--1 ps-4 fw-semi-bold">{{product.number_of_stock_out}}</td> -->
                      <td class="price text-center white-space-nowrap text-600 fs--1 ps-4 fw-semi-bold">{{product.price}}</td>
                      <td class="stockstatus text-center white-space-nowrap text-600 fs--1 ps-4 fw-semi-bold">{{product.stock_status}}</td>
                      <td class="stockstatus text-center white-space-nowrap text-600 fs--1 ps-4 fw-semi-bold">{{product.images}}</td>
                      <td class="stockstatus text-center white-space-nowrap text-600 fs--1 ps-4 fw-semi-bold">{{product.badge_no}}</td>
                      <td class="stockstatus text-center white-space-nowrap text-600 fs--1 ps-4 fw-semi-bold">{{product.item_no}}</td>
                      <td class="align-middle white-space-nowrap py-0">
                        {% if request.user.is_authenticated %} {% if perms.csvdata.view_csv_creation %} <a href="{% url 'csv-product-update' product.id %}">
                          <span data-feather="edit"></span>
                        </a> {% else %} {% for group in request.user.groups.all %} {% if perms.group.view_csv_creation %} <a href="{% url 'csv-product-update' product.id %}">
                          <span data-feather="edit"></span>
                        </a> {% endif %} {% endfor %} {% endif %} {% endif %} | {% if request.user.is_authenticated %} {% if perms.csvdata.delete_csv_creation %} <button class="btn btn-danger delete-product" data-product-id="{{ product.id }}">Delete</button> {% else %} {% for group in request.user.groups.all %} {% if perms.group.delete_csv_creation %} <button class="btn btn-danger delete-product" data-product-id="{{ product.id }}">Delete</button> {% endif %} {% endfor %} {% endif %} {% endif %}
                      </td>
                    </tr> {% endfor %} </tbody>
                </table>
                <!-- Add the pagination links -->
                <div class="page_filter" id="page_filter">
                  <nav class="d-flex justify-content-end" aria-label="Page navigation example"> {% if csv_Creation_data.has_previous %} <a class="page-link" href="?{% for key, value in request.GET.items %}{% if key != 'page' %}{{ key }}={{ value }}&{% endif %}{% endfor %}page={{ csv_Creation_data.previous_page_number }}">«</a> {% if csv_Creation_data.number > 3 %} <a class="page-link" href="?{% for key, value in request.GET.items %}{% if key != 'page' %}{{ key }}={{ value }}&{% endif %}{% endfor %}page=1">1</a> {% if csv_Creation_data.number > 4 %} <span class="page-link">...</span> {% endif %} {% endif %} {% endif %} {% for num in csv_Creation_data.paginator.page_range %} {% if csv_Creation_data.number == num %} <a class="page-link active" href="?{% for key, value in request.GET.items %}{% if key != 'page' %}{{ key }}={{ value }}&{% endif %}{% endfor %}page={{ num }}">{{ num }}</a> {% elif num > csv_Creation_data.number|add:'-3' and num < csv_Creation_data.number|add:'3' %} <a class="page-link" href="?{% for key, value in request.GET.items %}{% if key != 'page' %}{{ key }}={{ value }}&{% endif %}{% endfor %}page={{ num }}">{{ num }}</a> {% endif %} {% endfor %} {% if csv_Creation_data.has_next %} {% if csv_Creation_data.number < csv_Creation_data.paginator.num_pages|add:'-3' %} <span class="page-link">...</span>
                    <a class="page-link" href="?{% for key, value in request.GET.items %}{% if key != 'page' %}{{ key }}={{ value }}&{% endif %}{% endfor %}page={{ csv_Creation_data.paginator.num_pages }}">{{ csv_Creation_data.paginator.num_pages }}</a> {% elif csv_Creation_data.number < csv_Creation_data.paginator.num_pages|add:'-2' %} <a class="page-link" href="?{% for key, value in request.GET.items %}{% if key != 'page' %}{{ key }}={{ value }}&{% endif %}{% endfor %}page={{ csv_Creation_data.paginator.num_pages }}">{{ csv_Creation_data.paginator.num_pages }}</a> {% endif %} <a class="page-link" href="?{% for key, value in request.GET.items %}{% if key != 'page' %}{{ key }}={{ value }}&{% endif %}{% endfor %}page={{ csv_Creation_data.next_page_number }}">»</a> {% endif %}
                  </nav>
                </div>
              </div>
              <!-- Add the pagination links -->
              <!-- <div class="d-flex justify-content-end"><nav aria-label="Page navigation example"><ul class="pagination mb-0"> {% if product.has_previous %} <li class="page-item"><a class="page-link" href="?page={{ product.previous_page_number }}"><span class="fas fa-chevron-left"></span></a></li> {% endif %} {% for page_num in product.paginator.page_range %} <li class="page-item "><a class="page-link" href="?page={{ page_num }}">{{ page_num }}</a></li> {% endfor %} {% if product.has_next %} <li class="page-item"><a class="page-link pe-0" href="?page={{ product.next_page_number }}"><span class="fas fa-chevron-right"></span></a></li> {% endif %} </ul></nav></div> -->undefined undefined
            </div> {% else %} {% for group in request.user.groups.all %} {% if perms.user.view_csv_creation %} undefinedundefined<div class="mx-n4 px-4 mx-lg-n6 px-lg-6 bg-white border-top border-bottom border-200 position-relative top-1">
              <div class="table-responsive scrollbar mx-n1 px-1">
                <table class="table fs--1 mb-0">
                  <thead>
                    <tr>
                      <th class="white-space-nowrap fs--1 align-middle ps-0" style="max-width:20px; width:18px;">
                        <div class="form-check mb-0 fs-0">
                          <input class="form-check-input" id="checkbox-bulk-products-select" type="checkbox" data-bulk-select='{"body":"products-table-body"}' />
                        </div>
                      </th>
                      <!-- <th class="sort white-space-nowrap align-middle fs--2" scope="col" style="width:70px;"></th> -->
                      <th class="sort white-space-nowrap align-middle ps-4" scope="col" style="width:350px;" data-sort="product">PRODUCT NAME</th>
                      <th class="sort align-middle text-end ps-4" scope="col" data-sort="price" style="width:150px;">PRODUCT SKU</th>
                      <th class="sort align-middle text-end ps-4" scope="col" data-sort="model" style="width:200px;">PRODUCT MODEL</th>
                      <th class="sort align-middle ps-4" scope="col" data-sort="category" style="width:150px;">CATEGORY</th>
                      <th class="sort align-middle ps-3" scope="col" data-sort="tags" style="width:250px;">SUB CATEGORY</th>
                      <th class="sort align-middle fs-0 text-center ps-4" scope="col" style="width:125px;">BRAND</th>
                      <th class="sort align-middle ps-4" scope="col" data-sort="vendor" style="width:200px;">NO STOCK IN</th>
                      <th class="sort text-center align-middle pe-0 ps-4" scope="col">PRICE</th>
                      <th class="sort text-center align-middle pe-0 ps-4" scope="col">STOCK STATUS</th>
                      <th class="sort align-middle ps-4" scope="col" data-sort="image" style="width:50px;">images</th>
                      <th class="sort text-center align-middle pe-0 ps-4" scope="col">badge_no</th>
                      <th class="sort text-center align-middle pe-0 ps-4" scope="col">item_no</th>
                      <th class="sort text-center align-middle pe-0 ps-4" scope="col">Action</th>
                    </tr>
                  </thead>
                  <tbody class="list" id="products-table-body"> {% for product in csv_Creation_data %} <tr class="position-static" data-product-id="{{ product.id }}">
                      <td class="fs--1 align-middle">
                        <div class="form-check mb-0 fs-0">
                          <input class="form-check-input" type="checkbox" data-bulk-select-row='{"product":"Fitbit Sense Advanced Smartwatch with Tools for Heart Health, Stress Management & Skin Temperature Trends, Carbon/Graphite, One Size (S & L Bands...","productImage":"/products/1.png","price":"$39","category":"Plants","tags":["Health","Exercise","Discipline","Lifestyle","Fitness"],"star":false,"vendor":"Blue Olive Plant sellers. Inc","publishedOn":"Nov 12, 10:45 PM"}' />
                        </div>
                      </td>
                      <!-- <td class="align-middle white-space-nowrap py-0"><div class="border rounded-2"><img src="{{ MEDIA_PREFIX }}{{product.product_Image1}}" alt="" width="53" /></div></td> -->
                      <td class="product align-middle ps-4">
                        <a class="fw-semi-bold line-clamp-3 mb-0" href="{% url 'product_update' product.id %}">{{product.product_name}}</a>
                      </td>
                      <td class="sku text-center white-space-nowrap text-end fw-bold text-700 ps-4">{{product.product_sku}}</td>
                      <td class="model text-center white-space-nowrap text-end fw-bold text-700 ps-4">{{product.model_number}}</td>
                      <td class="category text-center white-space-nowrap text-600 fs--1 ps-4 fw-semi-bold">{{product.category_name}}</td>
                      <td class="sub_category text-center white-space-nowrap text-600 fs--1 ps-4 fw-semi-bold">{{product.sub_category_name}}</td>
                      </td>
                      <td class="brand text-center white-space-nowrap text-600 fs--1 ps-4 fw-semi-bold">{{product.brand_name}}</td>
                      <td class="stackin text-center white-space-nowrap text-600 fs--1 ps-4 fw-semi-bold">{{product.number_of_stock_in}}</td>
                      <!-- <td class="stackout text-center white-space-nowrap text-600 fs--1 ps-4 fw-semi-bold">{{product.number_of_stock_out}}</td> -->
                      <td class="price text-center white-space-nowrap text-600 fs--1 ps-4 fw-semi-bold">{{product.price}}</td>
                      <td class="stockstatus text-center white-space-nowrap text-600 fs--1 ps-4 fw-semi-bold">{{product.stock_status}}</td>
                      <td class="stockstatus text-center white-space-nowrap text-600 fs--1 ps-4 fw-semi-bold">{{product.images}}</td>
                      <td class="stockstatus text-center white-space-nowrap text-600 fs--1 ps-4 fw-semi-bold">{{product.badge_no}}</td>
                      <td class="stockstatus text-center white-space-nowrap text-600 fs--1 ps-4 fw-semi-bold">{{product.item_no}}</td>
                      <td class="align-middle white-space-nowrap py-0">
                        {% if request.user.is_authenticated %} {% if perms.csvdata.view_csv_creation %} <a href="{% url 'csv-product-update' product.id %}">
  <span data-feather="edit"></span>
</a> {% else %} {% for group in request.user.groups.all %} {% if perms.group.view_csv_creation %} <a href="{% url 'csv-product-update' product.id %}">
  <span data-feather="edit"></span>
</a> {% endif %} {% endfor %} {% endif %} {% endif %} | {% if request.user.is_authenticated %} {% if perms.csvdata.delete_csv_creation %} <button class="btn btn-danger delete-product" data-product-id="{{ product.id }}">Delete</button> {% else %} {% for group in request.user.groups.all %} {% if perms.group.delete_csv_creation %} <button class="btn btn-danger delete-product" data-product-id="{{ product.id }}">Delete</button> {% endif %} {% endfor %} {% endif %} {% endif %}
                      </td>
                    </tr> {% endfor %} </tbody>
                </table>
                <!-- Add the pagination links -->
                <div class="page_filter" id="page_filter">
                  <nav class="d-flex justify-content-end" aria-label="Page navigation example"> {% if csv_Creation_data.has_previous %} <a class="page-link" href="?{% for key, value in request.GET.items %}{% if key != 'page' %}{{ key }}={{ value }}&{% endif %}{% endfor %}page={{ csv_Creation_data.previous_page_number }}">«</a> {% if csv_Creation_data.number > 3 %} <a class="page-link" href="?{% for key, value in request.GET.items %}{% if key != 'page' %}{{ key }}={{ value }}&{% endif %}{% endfor %}page=1">1</a> {% if csv_Creation_data.number > 4 %} <span class="page-link">...</span> {% endif %} {% endif %} {% endif %} {% for num in csv_Creation_data.paginator.page_range %} {% if csv_Creation_data.number == num %} <a class="page-link active" href="?{% for key, value in request.GET.items %}{% if key != 'page' %}{{ key }}={{ value }}&{% endif %}{% endfor %}page={{ num }}">{{ num }}</a> {% elif num > csv_Creation_data.number|add:'-3' and num < csv_Creation_data.number|add:'3' %} <a class="page-link" href="?{% for key, value in request.GET.items %}{% if key != 'page' %}{{ key }}={{ value }}&{% endif %}{% endfor %}page={{ num }}">{{ num }}</a> {% endif %} {% endfor %} {% if csv_Creation_data.has_next %} {% if csv_Creation_data.number < csv_Creation_data.paginator.num_pages|add:'-3' %} <span class="page-link">...</span>
                    <a class="page-link" href="?{% for key, value in request.GET.items %}{% if key != 'page' %}{{ key }}={{ value }}&{% endif %}{% endfor %}page={{ csv_Creation_data.paginator.num_pages }}">{{ csv_Creation_data.paginator.num_pages }}</a> {% elif csv_Creation_data.number < csv_Creation_data.paginator.num_pages|add:'-2' %} <a class="page-link" href="?{% for key, value in request.GET.items %}{% if key != 'page' %}{{ key }}={{ value }}&{% endif %}{% endfor %}page={{ csv_Creation_data.paginator.num_pages }}">{{ csv_Creation_data.paginator.num_pages }}</a> {% endif %} <a class="page-link" href="?{% for key, value in request.GET.items %}{% if key != 'page' %}{{ key }}={{ value }}&{% endif %}{% endfor %}page={{ csv_Creation_data.next_page_number }}">»</a> {% endif %}
                  </nav>
                </div>undefined undefined
              </div>undefined undefined
              <!-- Add the pagination links -->undefined undefined
              <!-- <div class="d-flex justify-content-end"><nav aria-label="Page navigation example"><ul class="pagination mb-0"> {% if product.has_previous %} <li class="page-item"><a class="page-link" href="?page={{ product.previous_page_number }}"><span class="fas fa-chevron-left"></span></a></li> {% endif %} {% for page_num in product.paginator.page_range %} <li class="page-item "><a class="page-link" href="?page={{ page_num }}">{{ page_num }}</a></li> {% endfor %} {% if product.has_next %} <li class="page-item"><a class="page-link pe-0" href="?page={{ product.next_page_number }}"><span class="fas fa-chevron-right"></span></a></li> {% endif %} </ul></nav></div> -->undefined undefined
            </div> {% endif %} {% endfor %} {% endif %} {% endif %}
            </div>
          </div>
         
        </div>
      </div>
      <script>

          function displayPopupMessage(message, duration, success) {
              const popup = document.getElementById('popup-message');
              const popupText = document.getElementById('popup-message-text');
              popupText.textContent = message;
              if (success) {
                  popup.classList.add('success');
              }
              popup.style.display = 'block';

              setTimeout(function() {
                  popup.style.display = 'none';
                  popup.classList.remove('success');
              }, duration);
          }


        document.getElementById('export-table').addEventListener('click', function() {
          // Get the selected badge value
          const selectedBadge = document.querySelector('.export-badge').value;
          console.log(selectedBadge);

          // Check if a badge is selected
          if (selectedBadge === 'Select Badge To Export') {
            alert('Please select a badge before exporting.');
            return;
          }

          // Set the CSRF token in the request header
          axios.defaults.headers.common['X-CSRFToken'] = '{{ csrf_token }}';

          // Make a POST request using Axios to download the CSV file
          axios({
            method: 'post',
            url: 'export_csv_badge',
            responseType: 'blob',  // Set the response type to blob
            data: {
              selectedBadge: selectedBadge
            },
            headers: {
              'X-CSRFToken': getCookie('csrftoken'), // You need to implement getCookie function
            },
          })
          .then(function (response) {
            // Create a Blob from the response data
            const blob = new Blob([response.data], { type: 'application/csv' });

            // Create a link element and set its attributes
            const link = document.createElement('a');
            link.href = window.URL.createObjectURL(blob);
            link.download = `${selectedBadge}_products.csv`;

            // Append the link to the document and trigger the click event
            document.body.appendChild(link);
            link.click();

            // Remove the link from the document
            document.body.removeChild(link);
          })
          .catch(function (error) {
            console.error('Error downloading CSV file:', error);
          });
        });


        // function exportCSV(selectedBadge) {
        //   // Make a POST request using Axios to export the CSV file
        //   axios.post(`download_csv/${selectedBadge}`, {}, { responseType: 'blob' })
        //     .then(function (response) {
        //       // Create a link element to initiate the file download
        //       const blob = new Blob([response.data], { type: 'application/octet-stream' });
        //       const url = window.URL.createObjectURL(blob);
        //       const a = document.createElement('a');
        //       a.href = url;
        //       a.download = `badge_${selectedBadge}_data.csv`;
        //       a.style.display = 'none';
        //       document.body.appendChild(a);
        //       a.click();
        //       window.URL.revokeObjectURL(url);
        //     })
        //     .catch(function (error) {
        //       console.error('Error exporting:', error);
        //     });
        // }



         document.addEventListener('DOMContentLoaded', function() {
        const dropdowns = document.querySelectorAll('.filter-dropdown');

        dropdowns.forEach(dropdown => {
            dropdown.addEventListener('change', function() {
                const selectedValue = this.value;
                const filterType = this.getAttribute('data-filter');
                const csrfToken = "{{ csrf_token }}";

                axios.post('filter_csv_data', {
                    filter_type: filterType,
                    filter_value: selectedValue
                }, {
                    headers: {
                        'X-CSRFToken': csrfToken
                    }
                })
                .then(response => {
                  console.log(response.data)
                  // const responseData = JSON.parse(response.data);
                  const responseData = response.data;
                  const tableBody = document.querySelector('#products-table-body');

                  // Clear existing table rows
                  tableBody.innerHTML = '';

                  responseData.forEach(item => {
                      console.log(item)
                      const row = document.createElement('tr');
                      row.classList.add('position-static');
                      row.setAttribute('data-product-id', item.pk);

                    // Create and append table cells to the row (similar to your HTML structure)

                    //product update url

                    const editUrl = `/csv-product-update/${item.pk}`;

                    // Adjust the property names based on your data structure
                    row.innerHTML = `
                        <td class="fs--1 align-middle">
                          <div class="form-check mb-0 fs-0">
                            <input class="form-check-input" type="checkbox" data-bulk-select-row='{"product":"Fitbit Sense Advanced Smartwatch with Tools for Heart Health, Stress Management & Skin Temperature Trends, Carbon/Graphite, One Size (S & L Bands...","productImage":"/products/1.png","price":"$39","category":"Plants","tags":["Health","Exercise","Discipline","Lifestyle","Fitness"],"star":false,"vendor":"Blue Olive Plant sellers. Inc","publishedOn":"Nov 12, 10:45 PM"}' />
                          </div>
                        </td>                        
                        <td class="product"><a class="fw-semi-bold line-clamp-3 mb-0" href="#!">${item.product_name}</a></td>
                        <td class="sku text-center white-space-nowrap text-end fw-bold text-700 ps-4">${item.product_sku}</td>
                        <td class="model text-center white-space-nowrap text-end fw-bold text-700 ps-4">${item.model_number}</td>
                        <td class="category text-center white-space-nowrap text-600 fs--1 ps-4 fw-semi-bold">${item.category_name}</td>
                        <td class="sub_category text-center white-space-nowrap text-600 fs--1 ps-4 fw-semi-bold">${item.sub_category_name}</td>
                        <td class="brand text-center white-space-nowrap text-600 fs--1 ps-4 fw-semi-bold">${item.brand_name}</td>
                        <td class="stackin text-center white-space-nowrap text-600 fs--1 ps-4 fw-semi-bold">${item.number_of_stock_in}</td>
                        <td class="price text-center white-space-nowrap text-600 fs--1 ps-4 fw-semi-bold">${item.price}</td>
                        <td class="stockstatus text-center white-space-nowrap text-600 fs--1 ps-4 fw-semi-bold">${item.stock_status}</td>
                        <td class="stockstatus text-start white-space-nowrap text-600 fs--1 ps-4 fw-semi-bold">${item.images}</td>
                        <td class="stockstatus text-center white-space-nowrap text-600 fs--1 ps-4 fw-semi-bold">${item.badge_no}</td>
                        <td class="stockstatus text-center white-space-nowrap text-600 fs--1 ps-4 fw-semi-bold">${item.item_no}</td>                    
                        <td class="align-middle white-space-nowrap py-0">
                          <a href="/Al-admin/csv-product-update/${item.pk}"> <span data-feather="edit">Edit</span> </a> | <button class="btn btn-danger delete-product" data-product-id="${item.id}">Delete</button>
                        </td>

                    `;

                      tableBody.appendChild(row);
                });
            })
                .catch(error => {
                    console.error('Error:', error);
                });
            });
        });
    });



    document.querySelectorAll('.delete-product').forEach(button => {
            button.addEventListener('click', function () {
                const ProductId = this.getAttribute('data-product-id');
                console.log(ProductId)

                if (confirm('Are you sure you want to delete this Product in CSV Data?')) {
                    fetch(`csv-product/${ProductId}/delete/`, {
                        method: 'POST',
                        headers: {
                            'X-CSRFToken': getCookie('csrftoken'),
                            'Content-Type': 'application/json',
                        },
                        // body: JSON.stringify({}),
                    })
                    .then(response => response.json())
                    .then(data => {
                      displayPopupMessage(data.message, 5000, true);
                        // alert(data.message);
                        // You can also remove the coupon element from the page on success
                        window.location.reload();
                    })
                    .catch(error => {
                        console.error(error);
                    });
                }
            });
        });

        // Function to get the CSRF token from cookies
        function getCookie(name) {
            var value = "; " + document.cookie;
            var parts = value.split("; " + name + "=");
            if (parts.length === 2) return parts.pop().split(";").shift();
        }



    </script>
</main>

{% endblock %}