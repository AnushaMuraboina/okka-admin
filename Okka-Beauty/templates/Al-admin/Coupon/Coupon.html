{% extends 'Al-admin/base/base.html' %} {% load static %}{% block title %}my webpage{% endblock %} {% block body %} {% load static %}
{% get_media_prefix as MEDIA_PREFIX %}
<style>
  #popup-message {
      display: none;
      position: fixed;
      top: 20px; /* Updated to display at the top */
      left: 50%;
      transform: translateX(-50%);
      padding: 10px 20px;
      background-color: #333; /* Updated to dark background color */
      color: #fff;
      border-radius: 5px;
      z-index: 9999;
  }

  #popup-message.success {
      background-color: #28a745; /* Green color for success */
  }

  #popup-message .icon {
      margin-right: 10px;
  }
</style>
<main class="main" id="top">
   
    <main class="main" id="top">
        <div class="container-fluid px-0">
          <nav class="navbar navbar-vertical navbar-expand-lg">
            <script>
              var navbarStyle = window.config.config.phoenixNavbarStyle;
              if (navbarStyle && navbarStyle !== 'transparent') {
                document.querySelector('body').classList.add(`navbar-${navbarStyle}`);
              }
            </script>
            <div class="collapse navbar-collapse" id="navbarVerticalCollapse">
              <!-- scrollbar removed-->
              <div class="navbar-vertical-content">
                <ul class="navbar-nav flex-column" id="navbarVerticalNav">
                
                  <li class="nav-item"><a class="nav-link" href="{% url 'Dashboard' %}" data-bs-toggle="" aria-expanded="false">
                    <div class="d-flex align-items-center gap-2"><span data-feather="codesandbox"></span><span class="nav-link-text">Dashboard</span>
                    </div>
                  </a>
                  <!-- more inner pages-->
                </li>
    
                <li class="nav-item">
                
                  <div class="nav-item-wrapper">
                    <a class="nav-link dropdown-indicator label-1" href="#Banner" role="button" data-bs-toggle="collapse" aria-expanded="true" aria-controls="Banner">
                      <div class="d-flex align-items-center">
                        <div class="dropdown-indicator-icon"><span class="fas fa-caret-right"></span></div><span class="nav-link-icon"><span data-feather="image"></span></span><span class="nav-link-text">Banner Management</span>
                      </div>
                    </a>
                    <div class="parent-wrapper label-1">
                      <ul class="nav collapse parent show" data-bs-parent="#navbarVerticalCollapse" id="Banner">
                        <li class="collapsed-nav-item-title d-none">Banner Management
                        </li>
                        {% if request.user.is_authenticated %} {% if perms.banners.view_mainbanner  %}
                        <li class="nav-item"><a class="nav-link " href="{% url 'Buy-Promo-Banner' %}" data-bs-toggle="" aria-expanded="false">
                          <div class="d-flex align-items-center"><span class="nav-link-text">Main Banner</span>
                          </div>
                        </a>
                        <!-- more inner pages-->
                      </li>  
                      {% else %} {% for group in request.user.groups.all %} {% if perms.group.view_mainbanner  %}
                      <li class="nav-item"><a class="nav-link " href="{% url 'Buy-Promo-Banner' %}" data-bs-toggle="" aria-expanded="false">
                        <div class="d-flex align-items-center"><span class="nav-link-text">Main Banner</span>
                        </div>
                      </a>
                      <!-- more inner pages-->
                    </li>  
                    {% endif %} {% endfor %} {% endif %} {% endif %}
    
                    {% if request.user.is_authenticated %} {% if perms.banners.view_offer_banner %} <li class="nav-item">
                      <a class="nav-link " href="{% url 'pricebanner' %}" data-bs-toggle="" aria-expanded="false">
                        <div class="d-flex align-items-center">
                          <span class="nav-link-text">Price Banner</span>
                        </div>
                      </a>
                      <!-- more inner pages-->
                    </li> {% else %} {% for group in request.user.groups.all %} {% if perms.group.view_offer_banner %} <li class="nav-item">
                      <a class="nav-link " href="{% url 'pricebanner' %}" data-bs-toggle="" aria-expanded="false">
                        <div class="d-flex align-items-center">
                          <span class="nav-link-text">Price Banner</span>
                        </div>
                      </a>
                      <!-- more inner pages-->
                    </li> {% endif %} {% endfor %} {% endif %} {% endif %}
                       
                    {% if request.user.is_authenticated %} {% if perms.banners.view_mainbanner %} <li class="nav-item">
                      <a class="nav-link " href="{% url 'footerbanner' %}" data-bs-toggle="" aria-expanded="false">
                        <div class="d-flex align-items-center">
                          <span class="nav-link-text">Footer Banner</span>
                        </div>
                      </a>
                      <!-- more inner pages-->
                    </li> {% else %} {% for group in request.user.groups.all %} {% if perms.group.view_mainbanner %} <li class="nav-item">
                      <a class="nav-link " href="{% url 'footerbanner' %}" data-bs-toggle="" aria-expanded="false">
                        <div class="d-flex align-items-center">
                          <span class="nav-link-text">Footer Banner</span>
                        </div>
                      </a>
                      <!-- more inner pages-->
                    </li> {% endif %} {% endfor %} {% endif %} {% endif %}      
                      </ul>
                    </div>
                  </div>
                </li>
    
                <li class="nav-item">
                
                  <div class="nav-item-wrapper">
                    <a class="nav-link dropdown-indicator label-1" href="#customer" role="button" data-bs-toggle="collapse" aria-expanded="true" aria-controls="customer">
                      <div class="d-flex align-items-center">
                        <div class="dropdown-indicator-icon"><span class="fas fa-caret-right"></span></div><span class="nav-link-icon"><span data-feather="users"></span></span><span class="nav-link-text">Customer Management</span>
                      </div>
                    </a>
                    <div class="parent-wrapper label-1">
                      <ul class="nav collapse parent show" data-bs-parent="#navbarVerticalCollapse" id="customer">
                        <li class="collapsed-nav-item-title d-none">Customer Management
                        </li>
                        {% if request.user.is_authenticated %} {% if perms.user.view_user %} <li class="nav-item">
                          <a class="nav-link " href="{% url 'customer' %}" data-bs-toggle="" aria-expanded="false">
                            <div class="d-flex align-items-center">
                              <span class="nav-link-text">All Customer</span>
                            </div>
                          </a>
                          <!-- more inner pages-->
                        </li> {% else %} {% for group in request.user.groups.all %} {% if perms.group.view_user %} <li class="nav-item">
                          <a class="nav-link " href="{% url 'customer' %}" data-bs-toggle="" aria-expanded="false">
                            <div class="d-flex align-items-center">
                              <span class="nav-link-text">All Customer</span>
                            </div>
                          </a>
                          <!-- more inner pages-->
                        </li> {% endif %} {% endfor %} {% endif %} {% endif %}                  
                      </ul>
                    </div>
                  </div>
                </li>
    
                <li class="nav-item">
                
                  <div class="nav-item-wrapper">
                    <a class="nav-link dropdown-indicator label-1" href="#Product" role="button" data-bs-toggle="collapse" aria-expanded="true" aria-controls="Product">
                      <div class="d-flex align-items-center">
                        <div class="dropdown-indicator-icon"><span class="fas fa-caret-right"></span></div><span class="nav-link-icon"><span data-feather="shopping-cart"></span></span><span class="nav-link-text">Product Management</span>
                      </div>
                    </a>
                    <div class="parent-wrapper label-1">
                      <ul class="nav collapse parent show" data-bs-parent="#navbarVerticalCollapse" id="Product">
                        <li class="collapsed-nav-item-title d-none">Product Management
                        </li>
                        {% if request.user.is_authenticated %} {% if perms.products.view_products %} <li class="nav-item">
                          <a class="nav-link " href="{% url 'product-list' %}" data-bs-toggle="" aria-expanded="false">
                            <div class="d-flex align-items-center">
                              <span class="nav-link-text">All Products</span>
                            </div>
                          </a>
                          <!-- more inner pages-->
                        </li> {% else %} {% for group in request.user.groups.all %} {% if perms.group.view_products %} <li class="nav-item">
                          <a class="nav-link " href="{% url 'product-list' %}" data-bs-toggle="" aria-expanded="false">
                            <div class="d-flex align-items-center">
                              <span class="nav-link-text">All Products</span>
                            </div>
                          </a>
                          <!-- more inner pages-->
                        </li> {% endif %} {% endfor %} {% endif %} {% endif %}
                        {% if request.user.is_authenticated %} {% if perms.products.add_products %} <li class="nav-item">
                          <a class="nav-link" href="{% url 'product-adding' %}" data-bs-toggle="" aria-expanded="false">
                            <div class="d-flex align-items-center">
                              <span class="nav-link-text">Add Product</span>
                            </div>
                          </a>
                          <!-- more inner pages-->
                        </li> {% else %} {% for group in request.user.groups.all %} {% if perms.group.add_products %} <li class="nav-item">
                          <a class="nav-link" href="{% url 'product-adding' %}" data-bs-toggle="" aria-expanded="false">
                            <div class="d-flex align-items-center">
                              <span class="nav-link-text">Add Product</span>
                            </div>
                          </a>
                          <!-- more inner pages-->
                        </li> {% endif %} {% endfor %} {% endif %} {% endif %}
                        {% if request.user.is_authenticated %} {% if perms.products.view_category %} <li class="nav-item">
                          <a class="nav-link" href="{% url 'category-admin' %}" data-bs-toggle="" aria-expanded="false">
                            <div class="d-flex align-items-center">
                              <span class="nav-link-text">Categories</span>
                            </div>
                          </a>
                          <!-- more inner pages-->
                        </li> {% else %} {% for group in request.user.groups.all %} {% if perms.group.view_category %} <li class="nav-item">
                          <a class="nav-link" href="{% url 'category-admin' %}" data-bs-toggle="" aria-expanded="false">
                            <div class="d-flex align-items-center">
                              <span class="nav-link-text">Categories</span>
                            </div>
                          </a>
                          <!-- more inner pages-->
                        </li> {% endif %} {% endfor %} {% endif %} {% endif %}
                        {% if request.user.is_authenticated %} {% if perms.products.view_subcategory %} <li class="nav-item">
                          <a class="nav-link" href="{% url 'subcategory-admin' %}" data-bs-toggle="" aria-expanded="false">
                            <div class="d-flex align-items-center">
                              <span class="nav-link-text">Sub Categories</span>
                            </div>
                          </a>
                          <!-- more inner pages-->
                        </li> {% else %} {% for group in request.user.groups.all %} {% if perms.group.view_subcategory %} <li class="nav-item">
                          <a class="nav-link" href="{% url 'subcategory-admin' %}" data-bs-toggle="" aria-expanded="false">
                            <div class="d-flex align-items-center">
                              <span class="nav-link-text">Sub Categories</span>
                            </div>
                          </a>
                          <!-- more inner pages-->
                        </li> {% endif %} {% endfor %} {% endif %} {% endif %}
                        {% if request.user.is_authenticated %} {% if perms.products.view_brand %} <li class="nav-item">
                          <a class="nav-link" href="{% url 'brand-admin' %}" data-bs-toggle="" aria-expanded="false">
                            <div class="d-flex align-items-center">
                              <span class="nav-link-text">Brand</span>
                            </div>
                          </a>
                          <!-- more inner pages-->
                        </li> {% else %} {% for group in request.user.groups.all %} {% if perms.group.view_brand %} <li class="nav-item">
                          <a class="nav-link" href="{% url 'brand-admin' %}" data-bs-toggle="" aria-expanded="false">
                            <div class="d-flex align-items-center">
                              <span class="nav-link-text">Brand</span>
                            </div>
                          </a>
                          <!-- more inner pages-->
                        </li> {% endif %} {% endfor %} {% endif %} {% endif %}
                        {% if request.user.is_authenticated %} {% if perms.products.view_attribute %} <li class="nav-item">
                          <a class="nav-link" href="{% url 'attribute-admin' %}" data-bs-toggle="" aria-expanded="false">
                            <div class="d-flex align-items-center">
                              <span class="nav-link-text">Attribute</span>
                            </div>
                          </a>
                          <!-- more inner pages-->
                        </li> {% else %} {% for group in request.user.groups.all %} {% if perms.group.view_attribute %} <li class="nav-item">
                          <a class="nav-link" href="{% url 'attribute-admin' %}" data-bs-toggle="" aria-expanded="false">
                            <div class="d-flex align-items-center">
                              <span class="nav-link-text">Attribute</span>
                            </div>
                          </a>
                          <!-- more inner pages-->
                        </li> {% endif %} {% endfor %} {% endif %} {% endif %}
                      </ul>
                    </div>
                  </div>
                </li>
    
    
                  <li class="nav-item">
                
                    <div class="nav-item-wrapper">
                      <a class="nav-link dropdown-indicator label-1" href="#Order" role="button" data-bs-toggle="collapse" aria-expanded="true" aria-controls="Order">
                        <div class="d-flex align-items-center">
                          <div class="dropdown-indicator-icon"><span class="fas fa-caret-right"></span></div><span class="nav-link-icon"><span data-feather="truck"></span></span><span class="nav-link-text">Order Management</span>
                        </div>
                      </a>
                      <div class="parent-wrapper label-1">
                        <ul class="nav collapse parent show" data-bs-parent="#navbarVerticalCollapse" id="Order">
                          <li class="collapsed-nav-item-title d-none">Order Management
                          </li>
                          {% if request.user.is_authenticated %} {% if perms.checkout.view_user_order %} <li class="nav-item">
                            <a class="nav-link" href="{% url 'admin-order' %}" data-bs-toggle="" aria-expanded="false">
                              <div class="d-flex align-items-center">
                                <span class="nav-link-text">Orders</span>
                              </div>
                            </a>
                            <!-- more inner pages-->
                          </li> {% else %} {% for group in request.user.groups.all %} {% if perms.group.view_user_order %} <li class="nav-item">
                            <a class="nav-link" href="{% url 'admin-order' %}" data-bs-toggle="" aria-expanded="false">
                              <div class="d-flex align-items-center">
                                <span class="nav-link-text">Orders</span>
                              </div>
                            </a>
                            <!-- more inner pages-->
                          </li> {% endif %} {% endfor %} {% endif %} {% endif %}
                          {% if request.user.is_authenticated %} {% if perms.checkout.view_orderdeliveryperson %} <li class="nav-item">
                            <a class="nav-link" href="{% url 'delivery_person' %}" data-bs-toggle="" aria-expanded="false">
                              <div class="d-flex align-items-center">
                                <span class="nav-link-text">Delivery Person</span>
                              </div>
                            </a>
                            <!-- more inner pages-->
                          </li> {% else %} {% for group in request.user.groups.all %} {% if perms.group.view_orderdeliveryperson %} <li class="nav-item">
                            <a class="nav-link" href="{% url 'delivery_person' %}" data-bs-toggle="" aria-expanded="false">
                              <div class="d-flex align-items-center">
                                <span class="nav-link-text">Delivery Person</span>
                              </div>
                            </a>
                            <!-- more inner pages-->
                          </li> {% endif %} {% endfor %} {% endif %} {% endif %}
    
                          {% if request.user.is_authenticated %} {% if perms.checkout.view_orderreplacementcomment %} <li class="nav-item">
                            <a class="nav-link" href="{% url 'order-replace-page' %}" data-bs-toggle="" aria-expanded="false">
                              <div class="d-flex align-items-center">
                                <span class="nav-link-text">Replacement Orders</span>
                              </div>
                            </a>
                            <!-- more inner pages-->
                          </li> {% else %} {% for group in request.user.groups.all %} {% if perms.group.view_orderreplacementcomment %} <li class="nav-item">
                            <a class="nav-link" href="{% url 'order-replace-page' %}" data-bs-toggle="" aria-expanded="false">
                              <div class="d-flex align-items-center">
                                <span class="nav-link-text">Replacement Orders</span>
                              </div>
                            </a>
                            <!-- more inner pages-->
                          </li> {% endif %} {% endfor %} {% endif %} {% endif %}
    
    
                          {% if request.user.is_authenticated %} {% if perms.checkout.view_replacementcollectperson %} <li class="nav-item">
                            <a class="nav-link" href="{% url 'replacement_person' %}" data-bs-toggle="" aria-expanded="false">
                              <div class="d-flex align-items-center">
                                <span class="nav-link-text">Re-Collection Person</span>
                              </div>
                            </a>
                            <!-- more inner pages-->
                          </li> {% else %} {% for group in request.user.groups.all %} {% if perms.group.view_replacementcollectperson %} <li class="nav-item">
                            <a class="nav-link" href="{% url 'replacement_person' %}" data-bs-toggle="" aria-expanded="false">
                              <div class="d-flex align-items-center">
                                <span class="nav-link-text">Re-Collection Person</span>
                              </div>
                            </a>
                            <!-- more inner pages-->
                          </li> {% endif %} {% endfor %} {% endif %} {% endif %}
                      <li class="nav-item"><a class="nav-link" href="{% url 'product-adding' %}" data-bs-toggle="" aria-expanded="false">
                          <div class="d-flex align-items-center"><span class="nav-link-text">Abandoned cart</span>
                          </div>
                        </a>
                        <!-- more inner pages-->
                      </li>
                        </ul>
                      </div>
                    </div>
                  </li>
    
    
                  <li class="nav-item">
                
                    <div class="nav-item-wrapper">
                      <a class="nav-link dropdown-indicator label-1" href="#Coupon" role="button" data-bs-toggle="collapse" aria-expanded="true" aria-controls="Coupon">
                        <div class="d-flex align-items-center">
                          <div class="dropdown-indicator-icon"><span class="fas fa-caret-right"></span></div><span class="nav-link-icon"><span data-feather="tag"></span></span><span class="nav-link-text">Coupon</span>
                        </div>
                      </a>
                      <div class="parent-wrapper label-1">
                        <ul class="nav collapse parent show" data-bs-parent="#navbarVerticalCollapse" id="Coupon">
                          <li class="collapsed-nav-item-title d-none">Coupon
                          </li>
                          {% if request.user.is_authenticated %} {% if perms.products.view_coupon %} <li class="nav-item">
                            <a class="nav-link active" href="{% url 'coupon' %}" data-bs-toggle="" aria-expanded="false">
                              <div class="d-flex align-items-center">
                                <span class="nav-link-text">All Coupon</span>
                              </div>
                            </a>
                            <!-- more inner pages-->
                          </li> {% else %} {% for group in request.user.groups.all %} {% if perms.group.view_coupon %} <li class="nav-item">
                            <a class="nav-link active" href="{% url 'coupon' %}" data-bs-toggle="" aria-expanded="false">
                              <div class="d-flex align-items-center">
                                <span class="nav-link-text">All Coupon</span>
                              </div>
                            </a>
                            <!-- more inner pages-->
                          </li> {% endif %} {% endfor %} {% endif %} {% endif %}
                          {% if request.user.is_authenticated %} {% if perms.products.view_couponusage %} <li class="nav-item">
                            <a class="nav-link" href="{% url 'couponUseage' %}" data-bs-toggle="" aria-expanded="false">
                              <div class="d-flex align-items-center">
                                <span class="nav-link-text">Coupon Useage</span>
                              </div>
                            </a>
                            <!-- more inner pages-->
                          </li> {% else %} {% for group in request.user.groups.all %} {% if perms.group.view_couponusage %} <li class="nav-item">
                            <a class="nav-link" href="{% url 'couponUseage' %}" data-bs-toggle="" aria-expanded="false">
                              <div class="d-flex align-items-center">
                                <span class="nav-link-text">Coupon Useage</span>
                              </div>
                            </a>
                            <!-- more inner pages-->
                          </li> {% endif %} {% endfor %} {% endif %} {% endif %}
                        </ul>
                      </div>
                    </div>
                  </li>
    
                  <li class="nav-item">
                
                    <div class="nav-item-wrapper">
                      <a class="nav-link dropdown-indicator label-1" href="#CSV" role="button" data-bs-toggle="collapse" aria-expanded="true" aria-controls="CSV">
                        <div class="d-flex align-items-center">
                          <div class="dropdown-indicator-icon"><span class="fas fa-caret-right"></span></div><span class="nav-link-icon"><span data-feather="file-text"></span></span><span class="nav-link-text">CSV Management</span>
                        </div>
                      </a>
                      <div class="parent-wrapper label-1">
                        <ul class="nav collapse parent show" data-bs-parent="#navbarVerticalCollapse" id="CSV">
                          <li class="collapsed-nav-item-title d-none">CSV Management
                          </li>
                          {% if request.user.is_authenticated %} {% if perms.csvdata.view_csv_creation %} <li class="nav-item">
                            <a class="nav-link" href="3" data-bs-toggle="" aria-expanded="false">
                              <div class="d-flex align-items-center">
                                <span class="nav-link-text">Csv Data</span>
                              </div>
                            </a>
                            <!-- more inner pages-->
                          </li> {% else %} {% for group in request.user.groups.all %} {% if perms.group.view_csv_creation %} <li class="nav-item">
                            <a class="nav-link" href="3" data-bs-toggle="" aria-expanded="false">
                              <div class="d-flex align-items-center">
                                <span class="nav-link-text">Csv Data</span>
                              </div>
                            </a>
                            <!-- more inner pages-->
                          </li> {% endif %} {% endfor %} {% endif %} {% endif %}
                        </ul>
                      </div>
                    </div>
                  </li>
    
                  <li class="nav-item">
                
                    <div class="nav-item-wrapper">
                      <a class="nav-link dropdown-indicator label-1" href="#User" role="button" data-bs-toggle="collapse" aria-expanded="true" aria-controls="User">
                        <div class="d-flex align-items-center">
                          <div class="dropdown-indicator-icon"><span class="fas fa-caret-right"></span></div><span class="nav-link-icon"><span data-feather="user-check"></span></span><span class="nav-link-text">User Management</span>
                        </div>
                      </a>
                      <div class="parent-wrapper label-1">
                        <ul class="nav collapse parent show" data-bs-parent="#navbarVerticalCollapse" id="User">
                          <li class="collapsed-nav-item-title d-none">User Management
                          </li>
                          {% if request.user.is_authenticated %} {% if perms.auth.view_group %} <li class="nav-item">
                            <a class="nav-link" href="{% url 'group' %}" data-bs-toggle="" aria-expanded="false">
                              <div class="d-flex align-items-center">
                                <span class="nav-link-text">User Role</span>
                              </div>
                            </a>
                            <!-- more inner pages-->
                          </li> {% else %} {% for group in request.user.groups.all %} {% if perms.group.view_group %} <li class="nav-item">
                            <a class="nav-link" href="{% url 'group' %}" data-bs-toggle="" aria-expanded="false">
                              <div class="d-flex align-items-center">
                                <span class="nav-link-text">User Role</span>
                              </div>
                            </a>
                            <!-- more inner pages-->
                          </li> {% endif %} {% endfor %} {% endif %} {% endif %}
                        </ul>
                      </div>
                    </div>
                  </li>
    
                  <li class="nav-item">
                
                    <div class="nav-item-wrapper">
                      <a class="nav-link dropdown-indicator label-1" href="#Report" role="button" data-bs-toggle="collapse" aria-expanded="true" aria-controls="Report">
                        <div class="d-flex align-items-center">
                          <div class="dropdown-indicator-icon"><span class="fas fa-caret-right"></span></div><span class="nav-link-icon"><span data-feather="file-text"></span></span><span class="nav-link-text">Report</span>
                        </div>
                      </a>
                      <div class="parent-wrapper label-1">
                        <ul class="nav collapse parent show" data-bs-parent="#navbarVerticalCollapse" id="Report">
                          <li class="collapsed-nav-item-title d-none">Report
                          </li>
                          <li class="nav-item">
                            <a class="nav-link" href="{% url 'generate_order_report' %}" data-bs-toggle="" aria-expanded="false">
                              <div class="d-flex align-items-center">
                                <span class="nav-link-text">Order</span>
                              </div>
                            </a>
                            <!-- more inner pages-->
                          </li>
                          <li class="nav-item">
                            <a class="nav-link" href="{% url 'generate_invoice_report' %}" data-bs-toggle="" aria-expanded="false">
                              <div class="d-flex align-items-center">
                                <span class="nav-link-text">Invoice</span>
                              </div>
                            </a>
                            <!-- more inner pages-->
                          </li>
                          <li class="nav-item">
                            <a class="nav-link" href="{% url 'generate_order_shipping_report' %}" data-bs-toggle="" aria-expanded="false">
                              <div class="d-flex align-items-center">
                                <span class="nav-link-text">Shipping</span>
                              </div>
                            </a>
                            <!-- more inner pages-->
                          </li>
                          <li class="nav-item">
                            <a class="nav-link" href="{% url 'generate_coupon_report' %}" data-bs-toggle="" aria-expanded="false">
                              <div class="d-flex align-items-center">
                                <span class="nav-link-text">Coupon</span>
                              </div>
                            </a>
                            <!-- more inner pages-->
                          </li>
                          <li class="nav-item">
                            <a class="nav-link" href="{% url 'product-adding' %}" data-bs-toggle="" aria-expanded="false">
                              <div class="d-flex align-items-center">
                                <span class="nav-link-text">Abandoned Cart</span>
                              </div>
                            </a>
                            <!-- more inner pages-->
                          </li>
                        </ul>
                      </div>
                    </div>
                  </li>
                </ul>
              </div>
            </div>
            <div class="navbar-vertical-footer">
              <button class="btn navbar-vertical-toggle border-0 fw-semi-bold w-100 white-space-nowrap d-flex align-items-center"><span class="uil uil-left-arrow-to-left fs-0"></span><span class="uil uil-arrow-from-right fs-0"></span><span class="navbar-vertical-footer-text ms-2">Collapsed View</span></button>
            </div>
          </nav>
          {% include 'Al-admin/base/nav.html' %}
          <div class="content">
            <div id="popup-message">
              <span class="icon">✔</span> <!-- Green success icon -->
              <span id="popup-message-text"></span>
            </div>
            <div class="pb-5">
                <div class="mb-8">
                    <h2 class="mb-2">Coupon</h2>                
                </div>
                {% if Coupons %}
                <div id="products" data-list='{"valueNames":["Main category","subcategory name","Description"],"page":10,"pagination":true}'>
                    <div class="mb-4">
                      <div class="row g-3 justify-content-between">
                        <div class="col-auto">
                          <div class="search-box">
                            <form class="position-relative" data-bs-toggle="search" data-bs-display="static">
                              <input class="form-control search-input search" type="search" placeholder="Search products" aria-label="Search" />
                              <span class="fas fa-search search-box-icon"></span>
      
                            </form>
                          </div>
                        </div>
                        <div class="col-auto">
                            <!-- <a  href="#" class="btn btn-link text-900 me-4 px-0"><span class="fa-solid fa-file-export fs--1 me-2"></span>Export</a> -->
                            <!-- <a href="{% url 'sales/order-create-user' %}" class="btn btn-primary"><span class="fas fa-plus me-2"></span>Create New Coupon</a> -->
                            {% if request.user.is_authenticated %} {% if perms.products.add_coupon %} <button class="btn btn-primary mb-1" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasRight" aria-controls="offcanvasRight">
  <span class="fas fa-plus me-2"></span>Create New Coupon </button> {% else %} {% for group in request.user.groups.all %} {% if perms.group.add_coupon %} <button class="btn btn-primary mb-1" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasRight" aria-controls="offcanvasRight">
  <span class="fas fa-plus me-2"></span>Create New Coupon </button> {% endif %} {% endfor %} {% endif %} {% endif %}
                        </div>
                        <div class="offcanvas offcanvas-end" id="offcanvasRight" tabindex="-1" aria-labelledby="offcanvasRightLabel">
                            <div class="offcanvas-header">
                              <h5 id="offcanvasRightLabel">Add Coupon</h5>
                              <button class="btn-close text-reset" type="button" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                            </div>
                            <div class="offcanvas-body">
                                <form method="post" id="coupon-form" enctype="multipart/form-data">
                                    {% csrf_token %}
                                    <div class="input-group mb-3">
                                        <span class="input-group-text">Code</span>
                                        <input class="form-control" type="text" name="code" aria-label="code">
                                    </div>
                                    <div class="input-group mb-3">
                                        <span class="input-group-text">Discount</span>
                                        <input class="form-control" type="text" name="discount" aria-label="code">
                                    </div>
                                    <div class="input-group mb-3">
                                        <label class="input-group-text" for="datetimepicker">Valid From</label>
                                        <input class="form-control datetimepicker flatpickr-input" name="valid-form" id="datetimepicker" type="text" placeholder="dd/mm/yyyy hour : minute" data-options="{&quot;enableTime&quot;:true,&quot;dateFormat&quot;:&quot;d/m/y H:i&quot;,&quot;disableMobile&quot;:true}" readonly="readonly">
                                    </div>
                                    <div class="input-group mb-3">
                                        <label class="input-group-text" for="datetimepicker">Valid To</label>
                                        <input class="form-control datetimepicker flatpickr-input" name="valid-to" id="datetimepicker" type="text" placeholder="dd/mm/yyyy hour : minute" data-options="{&quot;enableTime&quot;:true,&quot;dateFormat&quot;:&quot;d/m/y H:i&quot;,&quot;disableMobile&quot;:true}" readonly="readonly">
                                    </div>
    
                                    <!-- <div class="form-check form-switch mb-3">
                                        <input class="form-check-input" name="active" id="flexSwitchCheckChecked" type="checkbox" checked="" />                                  
                                        <label class="form-check-label" for="flexSwitchCheckChecked">Active</label>
                                    </div> -->
    
                                    <button class="btn btn-primary w-100" type="submit">Save</button>
                                </form>            
                            </div>
                          </div>
                      </div>
                    </div>
                    
                    <div class="mx-n4 px-4 mx-lg-n6 px-lg-6 bg-white border-top border-bottom border-200 position-relative top-1">
                    <div class="row g-6 mt-3">
                      {% if request.user.is_authenticated %} {% if perms.products.view_coupon %} <div class="col-12">
                        <div class="table-responsive scrollbar mx-n1 px-1">
                          <table class="table fs--1 mb-0">
                            <thead>
                              <tr>
                                <th class="white-space-nowrap fs--1 align-middle ps-0" style="max-width:20px; width:18px;">
                                  <div class="form-check mb-0 fs-0">
                                    <input class="form-check-input" id="checkbox-bulk-products-select" type="checkbox" data-bulk-select='{"body":"products-table-body"}' />
                                  </div>
                                </th>
                                <th class="sort white-space-nowrap text-center align-middle ps-4" scope="col">Coupon Code</th>
                                <!-- <th class="sort white-space-nowrap align-middle ps-4" scope="col" style="width:350px;" data-sort="Main category">Main category</th> -->
                                <th class="sort white-space-nowrap text-center align-middle ps-4" scope="col" data-sort="brand name">Discount</th>
                                <th class="sort align-middle text-center text-middle ps-4" scope="col" data-sort="Status">Valid from</th>
                                <th class="sort align-middle text-center text-middle ps-4" scope="col" data-sort="Status">Valid to</th>
                                <!-- <th class="sort align-middle text-center text-middle ps-4" scope="col" data-sort="Status">Active</th> -->
                                <th class="sort align-middle text-center text-middle ps-4" scope="col" data-sort="Status">Action</th>
                              </tr>
                            </thead>
                            <tbody class="list" id="products-table-body"> {% for Coupons in Coupons %} <tr class="position-static">
                                <td class="fs--1 align-middle">
                                  <div class="form-check mb-0 fs-0">
                                    <input class="form-check-input" type="checkbox" data-bulk-select-row='{"product":"Fitbit Sense Advanced Smartwatch with Tools for Heart Health, Stress Management & Skin Temperature Trends, Carbon/Graphite, One Size (S & L Bands...","productImage":"/products/1.png","price":"$39","category":"Plants","tags":["Health","Exercise","Discipline","Lifestyle","Fitness"],"star":false,"vendor":"Blue Olive Plant sellers. Inc","publishedOn":"Nov 12, 10:45 PM"}' />
                                  </div>
                                </td>
                                <td class="align-middle text-center white-space-nowrap py-0">{{Coupons.code}}</td>
                                <td class="align-middle text-center white-space-nowrap py-0">{{ Coupons.discount|floatformat:0 }}%</td>
                                <td class="align-middle text-center white-space-nowrap py-0">{{ Coupons.valid_from|date:"d/m/Y H:i" }}</td>
                                <td class="align-middle text-center white-space-nowrap py-0">{{ Coupons.valid_to|date:"d/m/Y H:i" }}</td>
                                <!-- <td class="text-center white-space-nowrap fw-bold text-700 ps-4">{% if Coupons.Active == True %} <i class="fas fa-check-circle text-success"></i> {% else %} <i class="fa-solid fa-circle-xmark text-danger"></i> {% endif %} </td> -->
                                <td class="align-middle text-center white-space-nowrap py-0">
                                  <!-- <button class="btn btn-primary" type="button" data-bs-toggle="modal" data-bs-target="#verticallyCentered">Vertically centered modal</button> -->
                                  {% if request.user.is_authenticated %} {% if perms.products.view_coupon %} <span data-bs-toggle="modal" data-bs-target="#verticallyCentered" data-feather="edit"></span> {% else %} {% for group in request.user.groups.all %} {% if perms.group.view_coupon %} <span data-bs-toggle="modal" data-bs-target="#verticallyCentered" data-feather="edit"></span> {% endif %} {% endfor %} {% endif %} {% endif %} | {% if request.user.is_authenticated %} {% if perms.products.delete_coupon %} <button class="btn btn-danger delete-coupon" data-coupon-id="{{ Coupons.id }}">Delete</button> {% else %} {% for group in request.user.groups.all %} {% if perms.group.delete_coupon %} <button class="btn btn-danger delete-coupon" data-coupon-id="{{ Coupons.id }}">Delete</button> {% endif %} {% endfor %} {% endif %} {% endif %}
                                  <div class="modal fade" id="verticallyCentered" tabindex="-1" aria-labelledby="verticallyCenteredModalLabel" style="display: none;" aria-hidden="true">
                                    <div class="modal-dialog modal-dialog-centered">
                                      <div class="modal-content">
                                        <div class="modal-header">
                                          <h5 class="modal-title" id="verticallyCenteredModalLabel">Coupon Edit</h5>
                                          <button class="btn p-1" type="button" data-bs-dismiss="modal" aria-label="Close">
                                            <svg class="svg-inline--fa fa-xmark fs--1" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="xmark" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" data-fa-i2svg="">
                                              <path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"></path>
                                            </svg>
                                            <!-- <span class="fas fa-times fs--1"></span> Font Awesome fontawesome.com -->
                                          </button>
                                        </div>
                                        <div class="modal-body">
                                          <form method="post" id="coupon-update-form" enctype="multipart/form-data"> {% csrf_token %} <input type="hidden" name="coupon_id" value="{{ Coupons.id }}">
                                            <div class="input-group mb-3">
                                              <span class="input-group-text">Code</span>
                                              <input class="form-control" type="text" name="code" aria-label="code" value="{{Coupons.code}}">
                                            </div>
                                            <div class="input-group mb-3">
                                              <span class="input-group-text">Discount</span>
                                              <input class="form-control" type="text" name="discount" aria-label="code" value="{{ Coupons.discount|floatformat:0 }}">
                                            </div>
                                            <div class="input-group mb-3">
                                              <label class="input-group-text" for="datetimepicker">Valid From</label>
                                              <input class="form-control datetimepicker flatpickr-input" name="valid-form" id="datetimepicker" type="text" placeholder="dd/mm/yyyy hour : minute" data-options="{&quot;enableTime&quot;:true,&quot;dateFormat&quot;:&quot;d/m/y H:i&quot;,&quot;disableMobile&quot;:true}" value="{{ Coupons.valid_from|date:"d/m/Y H:i" }}" readonly="readonly">
                                            </div>
                                            <div class="input-group mb-3">
                                              <label class="input-group-text" for="datetimepicker">Valid To</label>
                                              <input class="form-control datetimepicker flatpickr-input" name="valid-to" id="datetimepicker" type="text" placeholder="dd/mm/yyyy hour : minute" data-options="{&quot;enableTime&quot;:true,&quot;dateFormat&quot;:&quot;d/m/y H:i&quot;,&quot;disableMobile&quot;:true}" value="{{ Coupons.valid_to|date:"d/m/Y H:i" }}" readonly="readonly">
                                            </div>
                                            <!-- <div class="form-check form-switch mb-3"> {% if Coupons.Active == True %} <input class="form-check-input" name="active" id="flexSwitchCheckChecked" type="checkbox" checked="" /> {% else %} <input class="form-check-input" name="active" id="flexSwitchCheckChecked" type="checkbox" /> {% endif %} <label class="form-check-label" for="flexSwitchCheckChecked">Active</label>
                                            </div> -->
                                            {% if request.user.is_authenticated %} {% if perms.products.change_coupon %} <button class="btn btn-primary w-100" type="submit">Save</button> {% else %} {% for group in request.user.groups.all %} {% if perms.group.change_coupon %} <button class="btn btn-primary w-100" type="submit">Save</button> {% endif %} {% endfor %} {% endif %} {% endif %}
                                          </form>
                                        </div>
                                        <div class="modal-footer">
                                          <!-- <button class="btn btn-primary" type="button">Okay</button><button class="btn btn-outline-primary" type="button" data-bs-dismiss="modal">Cancel</button> -->
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </td>
                              </tr> {% endfor %} </tbody>
                          </table>
                        </div>
                        <div class="row align-items-center justify-content-between py-2 pe-0 fs--1">
                          <div class="col-auto d-flex">
                            <p class="mb-0 d-none d-sm-block me-3 fw-semi-bold text-900" data-list-info="data-list-info"></p>
                            <a class="fw-semi-bold" href="#!" data-list-view="*">View all <span class="fas fa-angle-right ms-1" data-fa-transform="down-1"></span>
                            </a>
                            <a class="fw-semi-bold d-none" href="#!" data-list-view="less">View Less <span class="fas fa-angle-right ms-1" data-fa-transform="down-1"></span>
                            </a>
                          </div>
                          <div class="col-auto d-flex">
                            <button class="page-link" data-list-pagination="prev">
                              <span class="fas fa-chevron-left"></span>
                            </button>
                            <ul class="mb-0 pagination"></ul>
                            <button class="page-link pe-0" data-list-pagination="next">
                              <span class="fas fa-chevron-right"></span>
                            </button>
                          </div>
                        </div>
                      </div> {% else %} {% for group in request.user.groups.all %} {% if perms.user.view_coupon %} <div class="col-12">
                        <div class="table-responsive scrollbar mx-n1 px-1">
                          <table class="table fs--1 mb-0">
                            <thead>
                              <tr>
                                <th class="white-space-nowrap fs--1 align-middle ps-0" style="max-width:20px; width:18px;">
                                  <div class="form-check mb-0 fs-0">
                                    <input class="form-check-input" id="checkbox-bulk-products-select" type="checkbox" data-bulk-select='{"body":"products-table-body"}' />
                                  </div>
                                </th>
                                <th class="sort white-space-nowrap text-center align-middle ps-4" scope="col">Coupon Code</th>
                                <!-- <th class="sort white-space-nowrap align-middle ps-4" scope="col" style="width:350px;" data-sort="Main category">Main category</th> -->
                                <th class="sort white-space-nowrap text-center align-middle ps-4" scope="col" data-sort="brand name">Discount</th>
                                <th class="sort align-middle text-center text-middle ps-4" scope="col" data-sort="Status">Valid from</th>
                                <th class="sort align-middle text-center text-middle ps-4" scope="col" data-sort="Status">Valid to</th>
                                <!-- <th class="sort align-middle text-center text-middle ps-4" scope="col" data-sort="Status">Active</th> -->
                                <th class="sort align-middle text-center text-middle ps-4" scope="col" data-sort="Status">Action</th>
                              </tr>
                            </thead>
                            <tbody class="list" id="products-table-body"> {% for Coupons in Coupons %} <tr class="position-static">
                                <td class="fs--1 align-middle">
                                  <div class="form-check mb-0 fs-0">
                                    <input class="form-check-input" type="checkbox" data-bulk-select-row='{"product":"Fitbit Sense Advanced Smartwatch with Tools for Heart Health, Stress Management & Skin Temperature Trends, Carbon/Graphite, One Size (S & L Bands...","productImage":"/products/1.png","price":"$39","category":"Plants","tags":["Health","Exercise","Discipline","Lifestyle","Fitness"],"star":false,"vendor":"Blue Olive Plant sellers. Inc","publishedOn":"Nov 12, 10:45 PM"}' />
                                  </div>
                                </td>
                                <td class="align-middle text-center white-space-nowrap py-0">{{Coupons.code}}</td>
                                <td class="align-middle text-center white-space-nowrap py-0">{{ Coupons.discount|floatformat:0 }}%</td>
                                <td class="align-middle text-center white-space-nowrap py-0">{{ Coupons.valid_from|date:"d/m/Y H:i" }}</td>
                                <td class="align-middle text-center white-space-nowrap py-0">{{ Coupons.valid_to|date:"d/m/Y H:i" }}</td>
                                <!-- <td class="text-center white-space-nowrap fw-bold text-700 ps-4">{% if Coupons.Active == True %} <i class="fas fa-check-circle text-success"></i> {% else %} <i class="fa-solid fa-circle-xmark text-danger"></i> {% endif %} </td> -->
                                <td class="align-middle text-center white-space-nowrap py-0">
                                  <!-- <button class="btn btn-primary" type="button" data-bs-toggle="modal" data-bs-target="#verticallyCentered">Vertically centered modal</button> -->
                                  {% if request.user.is_authenticated %} {% if perms.products.view_coupon %} <span data-bs-toggle="modal" data-bs-target="#verticallyCentered" data-feather="edit"></span> {% else %} {% for group in request.user.groups.all %} {% if perms.group.view_coupon %} <span data-bs-toggle="modal" data-bs-target="#verticallyCentered" data-feather="edit"></span> {% endif %} {% endfor %} {% endif %} {% endif %} | {% if request.user.is_authenticated %} {% if perms.products.delete_coupon %} <button class="btn btn-danger delete-coupon" data-coupon-id="{{ Coupons.id }}">Delete</button> {% else %} {% for group in request.user.groups.all %} {% if perms.group.delete_coupon %} <button class="btn btn-danger delete-coupon" data-coupon-id="{{ Coupons.id }}">Delete</button> {% endif %} {% endfor %} {% endif %} {% endif %}
                                  <div class="modal fade" id="verticallyCentered" tabindex="-1" aria-labelledby="verticallyCenteredModalLabel" style="display: none;" aria-hidden="true">
                                    <div class="modal-dialog modal-dialog-centered">
                                      <div class="modal-content">
                                        <div class="modal-header">
                                          <h5 class="modal-title" id="verticallyCenteredModalLabel">Coupon Edit</h5>
                                          <button class="btn p-1" type="button" data-bs-dismiss="modal" aria-label="Close">
                                            <svg class="svg-inline--fa fa-xmark fs--1" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="xmark" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" data-fa-i2svg="">
                                              <path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"></path>
                                            </svg>
                                            <!-- <span class="fas fa-times fs--1"></span> Font Awesome fontawesome.com -->
                                          </button>
                                        </div>
                                        <div class="modal-body">
                                          <form method="post" id="coupon-update-form" enctype="multipart/form-data"> {% csrf_token %} <input type="hidden" name="coupon_id" value="{{ Coupons.id }}">
                                            <div class="input-group mb-3">
                                              <span class="input-group-text">Code</span>
                                              <input class="form-control" type="text" name="code" aria-label="code" value="{{Coupons.code}}">
                                            </div>
                                            <div class="input-group mb-3">
                                              <span class="input-group-text">Discount</span>
                                              <input class="form-control" type="text" name="discount" aria-label="code" value="{{ Coupons.discount|floatformat:0 }}">
                                            </div>
                                            <div class="input-group mb-3">
                                              <label class="input-group-text" for="datetimepicker">Valid From</label>
                                              <input class="form-control datetimepicker flatpickr-input" name="valid-form" id="datetimepicker" type="text" placeholder="dd/mm/yyyy hour : minute" data-options="{&quot;enableTime&quot;:true,&quot;dateFormat&quot;:&quot;d/m/y H:i&quot;,&quot;disableMobile&quot;:true}" value="{{ Coupons.valid_from|date:"d/m/Y H:i" }}" readonly="readonly">
                                            </div>
                                            <div class="input-group mb-3">
                                              <label class="input-group-text" for="datetimepicker">Valid To</label>
                                              <input class="form-control datetimepicker flatpickr-input" name="valid-to" id="datetimepicker" type="text" placeholder="dd/mm/yyyy hour : minute" data-options="{&quot;enableTime&quot;:true,&quot;dateFormat&quot;:&quot;d/m/y H:i&quot;,&quot;disableMobile&quot;:true}" value="{{ Coupons.valid_to|date:"d/m/Y H:i" }}" readonly="readonly">
                                            </div>
                                            <!-- <div class="form-check form-switch mb-3"> {% if Coupons.Active == True %} <input class="form-check-input" name="active" id="flexSwitchCheckChecked" type="checkbox" checked="" /> {% else %} <input class="form-check-input" name="active" id="flexSwitchCheckChecked" type="checkbox" /> {% endif %} <label class="form-check-label" for="flexSwitchCheckChecked">Active</label>
                                            </div> -->
                                            {% if request.user.is_authenticated %} {% if perms.products.change_coupon %} <button class="btn btn-primary w-100" type="submit">Save</button> {% else %} {% for group in request.user.groups.all %} {% if perms.group.change_coupon %} <button class="btn btn-primary w-100" type="submit">Save</button> {% endif %} {% endfor %} {% endif %} {% endif %}
                                          </form>
                                        </div>
                                        <div class="modal-footer">
                                          <!-- <button class="btn btn-primary" type="button">Okay</button><button class="btn btn-outline-primary" type="button" data-bs-dismiss="modal">Cancel</button> -->
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </td>
                              </tr> {% endfor %} </tbody>
                          </table>
                        </div>
                        <div class="row align-items-center justify-content-between py-2 pe-0 fs--1">
                          <div class="col-auto d-flex">
                            <p class="mb-0 d-none d-sm-block me-3 fw-semi-bold text-900" data-list-info="data-list-info"></p>
                            <a class="fw-semi-bold" href="#!" data-list-view="*">View all <span class="fas fa-angle-right ms-1" data-fa-transform="down-1"></span>
                            </a>
                            <a class="fw-semi-bold d-none" href="#!" data-list-view="less">View Less <span class="fas fa-angle-right ms-1" data-fa-transform="down-1"></span>
                            </a>
                          </div>
                          <div class="col-auto d-flex">
                            <button class="page-link" data-list-pagination="prev">
                              <span class="fas fa-chevron-left"></span>
                            </button>
                            <ul class="mb-0 pagination"></ul>
                            <button class="page-link pe-0" data-list-pagination="next">
                              <span class="fas fa-chevron-right"></span>
                            </button>
                          </div>
                        </div>
                      </div> {% endif %} {% endfor %} {% endif %} {% endif %}
                    </div>
                    </div>                    
                  </div>
                  {% else %}
                    <div class="text-center">        
                      <img class="text-center align-item-center" src="../static/assets/img/landing_page/Coupon.png" alt="cart empty image" style="height: 200px;"><br>
                      <p  class="text-center text-1100 fs--5 mt-5 mb-0">There is no coupon available!.</p>
                      <p class="text-center text-700 fs--1">Now you can add a coupon to it.</p>
                      {% if request.user.is_authenticated %} {% if perms.products.add_coupon %} <button class="btn btn-primary mb-1" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasRight" aria-controls="offcanvasRight">
  <span class="fas fa-plus me-2"></span>Create New Coupon </button> {% else %} {% for group in request.user.groups.all %} {% if perms.group.add_coupon %} <button class="btn btn-primary mb-1" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasRight" aria-controls="offcanvasRight">
  <span class="fas fa-plus me-2"></span>Create New Coupon </button> {% endif %} {% endfor %} {% endif %} {% endif %}
                      <div class="offcanvas offcanvas-end" id="offcanvasRight" tabindex="-1" aria-labelledby="offcanvasRightLabel">
                        <div class="offcanvas-header">
                          <h5 id="offcanvasRightLabel">Add Coupon</h5>
                          <button class="btn-close text-reset" type="button" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                        </div>
                        <div class="offcanvas-body">
                            <form method="post" id="coupon-form" enctype="multipart/form-data">
                                {% csrf_token %}
                                <div class="input-group mb-3">
                                    <span class="input-group-text">Code</span>
                                    <input class="form-control" type="text" name="code" aria-label="code">
                                </div>
                                <div class="input-group mb-3">
                                    <span class="input-group-text">Discount</span>
                                    <input class="form-control" type="text" name="discount" aria-label="code">
                                </div>
                                <div class="input-group mb-3">
                                    <label class="input-group-text" for="datetimepicker">Valid From</label>
                                    <input class="form-control datetimepicker flatpickr-input" name="valid-form" id="datetimepicker" type="text" placeholder="dd/mm/yyyy hour : minute" data-options="{&quot;enableTime&quot;:true,&quot;dateFormat&quot;:&quot;d/m/y H:i&quot;,&quot;disableMobile&quot;:true}" readonly="readonly">
                                </div>
                                <div class="input-group mb-3">
                                    <label class="input-group-text" for="datetimepicker">Valid To</label>
                                    <input class="form-control datetimepicker flatpickr-input" name="valid-to" id="datetimepicker" type="text" placeholder="dd/mm/yyyy hour : minute" data-options="{&quot;enableTime&quot;:true,&quot;dateFormat&quot;:&quot;d/m/y H:i&quot;,&quot;disableMobile&quot;:true}" readonly="readonly">
                                </div>

                                <!-- <div class="form-check form-switch mb-3">
                                    <input class="form-check-input" name="active" id="flexSwitchCheckChecked" type="checkbox" checked="" />                                  
                                    <label class="form-check-label" for="flexSwitchCheckChecked">Active</label>
                                </div> -->

                                <button class="btn btn-primary w-100" type="submit">Save</button>
                            </form>            
                        </div>
                      </div>
                    </div> 
                    {% endif %}
            </div>
          </div>
        </div>
        
        <script>
            const form = document.getElementById('coupon-form');

            form.addEventListener('submit', async (e) => {
            e.preventDefault();
          
                // Get the form element by its id
                const form = document.getElementById('coupon-form');
                console.log('axios post function is work')

                // Serialize the form data
                const formData = new FormData(form);
          
                // Send the data to the server using Axios
                axios.post('add-coupon', formData)
                    .then(response => {
                       // Handle the response (e.g., show a success message)
                      console.log('Coupon added successfully');
                      // Reload the page
                      window.location.reload();
                    })
                    .catch(error => {
                    // Handle errors (e.g., show an error message)
                    console.error('Error adding coupon', error);
                    });
            });


            document.querySelectorAll('#coupon-update-form').forEach(form => {
              form.addEventListener('submit', function (e) {
                  e.preventDefault(); // Prevent the default form submission

                  // Serialize the form data
                  const formData = new FormData(form);

                  // Make an Axios POST request to your view
                  axios.post('update_coupon', formData)
                      .then(response => {
                          // Handle the success response if needed
                          console.log(response.data);
                          window.location.reload();
                      })
                      .catch(error => {
                          // Handle the error response if needed
                          console.error(error);
                      });
              });
          });


          function displayPopupMessage(message, duration, success) {
              const popup = document.getElementById('popup-message');
              const popupText = document.getElementById('popup-message-text');
              popupText.textContent = message;
              if (success) {
                  popup.classList.add('success');
              }
              popup.style.display = 'block';

              setTimeout(function() {
                  popup.style.display = 'none';
                  popup.classList.remove('success');
              }, duration);
          }




          document.querySelectorAll('.delete-coupon').forEach(button => {
            button.addEventListener('click', function () {
                const couponId = this.getAttribute('data-coupon-id');
                console.log(couponId)

                if (confirm('Are you sure you want to delete this coupon?')) {
                    fetch(`coupons/${couponId}/delete/`, {
                        method: 'POST',
                        headers: {
                            'X-CSRFToken': getCookie('csrftoken'),
                            'Content-Type': 'application/json',
                        },
                        // body: JSON.stringify({}),
                    })
                    .then(response => response.json())
                    .then(data => {
                      displayPopupMessage(data.message, 5000, true);
                        // alert(data.message);
                        // You can also remove the coupon element from the page on success
                        window.location.reload();
                    })
                    .catch(error => {
                        console.error(error);
                    });
                }
            });
        });

        // Function to get the CSRF token from cookies
        function getCookie(name) {
            var value = "; " + document.cookie;
            var parts = value.split("; " + name + "=");
            if (parts.length === 2) return parts.pop().split(";").shift();
        }


        </script>
          
       
      </main>   

{% endblock %}