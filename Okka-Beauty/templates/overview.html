{% extends 'deko-admin/base/base.html' %} {% load static %}{% block title %}my webpage{% endblock %} {% block body %} {% load static %}
{% get_media_prefix as MEDIA_PREFIX %}
<style>
    div#dateRangeContainer {
        position: absolute;
        z-index: 1;
        top: 92px;
        left: 0;
    }

    div#dateRangeContainer {
        width: 30%;
    }

    .grid-weeks-disaply {
        display: grid !important;
        grid-template-columns: repeat(2, 1fr);
        text-align: left;
    }

    .grid-weeks-disaply button {
        text-align: justify;
        color: grey;
        padding: 20px 30px;
        background-color: rgb(240, 240, 240);
        border: 1px solid white;
    }

    .grid-weeks-disaply button:active {
        background-color: white;
    }
</style>
<main class="main" id="top">
    <div class="container-fluid px-0">
      {% include 'deko-admin/base/side_nav.html' %}
      <div class="content">
    
    
        <!-- <section class="date-range p-0 mb-3">
            <div class="container">
                <p>Date range</p>
                <div class="month-date-range d-flex gap-5">
                    <div class="month-range ps-3">
                        <b>Month to date (Sep 1 - 28, 2024)</b><br>
                        vs. Previous year (Sep 1 - 28, 2023)
                    </div>
    
                    <div class="show-date-range">
                        <i class="fas fa-chevron-down" id="calendar-icon"></i>
                        <div class="date-range-input" id="dateRangeContainer">
                            <nav>
                                <div class="nav nav-tabs" id="nav-tab" role="tablist">
                                    <button class="nav-link active w-50" id="nav-presets-tab" data-bs-toggle="tab"
                                        data-bs-target="#nav-presets" type="button" role="tab" aria-controls="nav-presets"
                                        aria-selected="true">Presets</button>
                                    <button class="nav-link w-50" id="nav-custom-tab" data-bs-toggle="tab"
                                        data-bs-target="#nav-custom" type="button" role="tab" aria-controls="nav-custom"
                                        aria-selected="false">Custom</button>
                                </div>
                            </nav>
                            <div class="tab-content" id="nav-tabContent">
                                <div class="tab-pane fade show active" id="nav-presets" role="tabpanel"
                                    aria-labelledby="nav-presets-tab">
                                    <div class="card border p-3">
                                        <p class="text-center border-bottom p-2 text-uppercase"><small>Select a date
                                                range</small></p>
                                        <div class="d-grid date-card border">
                                            <button type="button" class="btn btn-light btn-sm rounded-0">Today</button>
                                            <button type="button" class="btn btn-light btn-sm rounded-0">Yesterday</button>
                                            <button type="button" class="btn btn-light btn-sm rounded-0">Week to
                                                date</button>
                                            <button type="button" class="btn btn-light btn-sm rounded-0">Last Week</button>
                                            <button type="button" class="btn btn-light btn-sm rounded-0">Month to
                                                date</button>
                                            <button type="button" class="btn btn-light btn-sm rounded-0">Last Month</button>
                                            <button type="button" class="btn btn-light btn-sm rounded-0">Quarter to
                                                date</button>
                                            <button type="button" class="btn btn-light btn-sm rounded-0">Last
                                                Quarter</button>
                                            <button type="button" class="btn btn-light btn-sm rounded-0">Year to
                                                date</button>
                                            <button type="button" class="btn btn-light btn-sm rounded-0">Last Year</button>
                                        </div>
                                        <p class="border-bottom border-top p-2 text-center text-uppercase"><small>Compare
                                                to</small></p>
                                        <div class="d-grid date-card border">
                                            <button type="button" class="btn btn-light btn-sm rounded-0">Previous
                                                Period</button>
                                            <button type="button" class="btn btn-light btn-sm rounded-0">Previous
                                                Year</button>
                                        </div>
                                        <div class="pt-3 text-center">
                                            <button type="button" class="btn btn-primary pt-1 pb-1 ">Update</button>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="nav-custom" role="tabpanel" aria-labelledby="nav-custom-tab">
                                    <input type="text" id="dateRangePicker" placeholder="Select date range" />
                                </div>
                            </div>
                        </div>
                    </div>
    
    
    
    
                </div>
            </div>
        </section> -->
    
        <!-- <section class="date-range p-0 mb-3 calculate-month-wise">
            <div class="container">
                <p>Date range</p>
                <div class="month-date-range d-flex gap-5">
                    <div class="month-range ps-3">
                        <b>Month to date (Sep 1 - 28, 2024)</b><br>
                        vs. Previous year (Sep 1 - 28, 2023)
                    </div>

                    <div class="show-date-range">
                        <i class="fas fa-chevron-down" id="calendar-icon" onclick="toggleDropdown()"></i>
                        <div class="date-range-input d-none card" id="dateRangeContainer">
                            <p class="text-center border-bottom p-2 text-uppercase"><small>Select a date
                                range</small></p>
                                <nav>
                                    <div class="nav nav-tabs" id="nav-tab" role="tablist">
                                        <button class="nav-link active w-50" id="nav-presets-tab" data-bs-toggle="tab"
                                            data-bs-target="#nav-presets" type="button" role="tab"
                                            aria-controls="nav-presets" aria-selected="true">Presets</button>
                                        <button class="nav-link w-50" id="nav-custom-tab" data-bs-toggle="tab"
                                            data-bs-target="#nav-custom" type="button" role="tab"
                                            aria-controls="nav-custom" aria-selected="false">Custom</button>
                                    </div>
                                </nav>
                            <div class="tab-content" id="nav-tabContent">
                                
                                <div class="tab-pane fade show active" id="nav-presets" role="tabpanel"
                                    aria-labelledby="nav-presets-tab">
                                    <div class="p-3">
                         
                                        <div class="d-grid date-card border grid-weeks-disaply">
                                            <button type="button"
                                                class="btn btn-light btn-sm rounded-0">Today</button>
                                            <button type="button"
                                                class="btn btn-light btn-sm rounded-0">Yesterday</button>
                                            <button type="button" class="btn btn-light btn-sm rounded-0">Week to
                                                date</button>
                                            <button type="button" class="btn btn-light btn-sm rounded-0">Last
                                                Week</button>
                                            <button type="button" class="btn btn-light btn-sm rounded-0">Month to
                                                date</button>
                                            <button type="button" class="btn btn-light btn-sm rounded-0">Last
                                                Month</button>
                                            <button type="button" class="btn btn-light btn-sm rounded-0">Quarter to
                                                date</button>
                                            <button type="button" class="btn btn-light btn-sm rounded-0">Last
                                                Quarter</button>
                                            <button type="button" class="btn btn-light btn-sm rounded-0">Year to
                                                date</button>
                                            <button type="button" class="btn btn-light btn-sm rounded-0">Last
                                                Year</button>
                                        </div>
                                        <p class="border-bottom border-top p-2 text-center text-uppercase">
                                            <small>Compare
                                                to</small></p>
                                        <div class="d-grid date-card border grid-weeks-disaply">
                                            <button type="button" class="btn btn-light btn-sm rounded-0">Previous
                                                Period</button>
                                            <button type="button" class="btn btn-light btn-sm rounded-0">Previous
                                                Year</button>
                                        </div>
                                        <div class="pt-3 text-center">
                                            <button type="button" class="btn btn-primary py-2 px-4 ">Update</button>
                                        </div>
                                    </div>
                                </div>
                              
                                <div class="tab-pane fade me-2" id="nav-custom" role="tabpanel" 
                                    aria-labelledby="nav-custom-tab">
                                    
                                    <label class="form-label" for="timepicker2">Select Time Range</label>

                                    <input class="form-control datetimepicker flatpickr-input mb-4  w-80 mx-1" id="timepicker2"
                                        type="text" placeholder="d/m/y to d/m/y"
                                        data-options="{&quot;mode&quot;:&quot;range&quot;,&quot;dateFormat&quot;:&quot;d/m/y&quot;,&quot;disableMobile&quot;:true}"
                                        readonly="readonly">
                                </div>

                            
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section> -->
        <section class="date-range p-0 mb-3 calculate-month-wise">
            <div class="container">
                <p>Date range</p>
                <div class="month-date-range d-flex gap-5">
                    <div class="month-range ps-3">
                        <b>Month to date (Sep 1 - 28, 2024)</b><br>
                        vs. Previous year (Sep 1 - 28, 2023)
                    </div>

                    <div class="show-date-range">
                        <i class="fas fa-chevron-down" id="calendar-icon" onclick="toggleDropdown()"></i>
                        <div class="date-range-input d-none card" id="dateRangeContainer">
                            <p class="text-center border-bottom p-2 text-uppercase"><small>Select a date
                                range</small></p>
                                <nav>
                                    <div class="nav nav-tabs" id="nav-tab" role="tablist">
                                        <button class="nav-link active w-50" id="nav-presets-tab" data-bs-toggle="tab"
                                            data-bs-target="#nav-presets" type="button" role="tab"
                                            aria-controls="nav-presets" aria-selected="true">Presets</button>
                                        <button class="nav-link w-50" id="nav-custom-tab" data-bs-toggle="tab"
                                            data-bs-target="#nav-custom" type="button" role="tab"
                                            aria-controls="nav-custom" aria-selected="false">Custom</button>
                                    </div>
                                </nav>
                            <div class="tab-content" id="nav-tabContent">
                              
                                <div class="tab-pane fade show active" id="nav-presets" role="tabpanel"
                                    aria-labelledby="nav-presets-tab">
                                    <div class="p-3">
                                       
                                        <div class="d-grid date-card border grid-weeks-disaply">
                                            <button type="button"
                                                class="btn btn-light btn-sm rounded-0">Today</button>
                                            <button type="button"
                                                class="btn btn-light btn-sm rounded-0">Yesterday</button>
                                            <button type="button" class="btn btn-light btn-sm rounded-0">Week to
                                                date</button>
                                            <button type="button" class="btn btn-light btn-sm rounded-0">Last
                                                Week</button>
                                            <button type="button" class="btn btn-light btn-sm rounded-0">Month to
                                                date</button>
                                            <button type="button" class="btn btn-light btn-sm rounded-0">Last
                                                Month</button>
                                            <button type="button" class="btn btn-light btn-sm rounded-0">Quarter to
                                                date</button>
                                            <button type="button" class="btn btn-light btn-sm rounded-0">Last
                                                Quarter</button>
                                            <button type="button" class="btn btn-light btn-sm rounded-0">Year to
                                                date</button>
                                            <button type="button" class="btn btn-light btn-sm rounded-0">Last
                                                Year</button>
                                        </div>
                                        <p class="border-bottom border-top p-2 text-center text-uppercase">
                                            <small>Compare
                                                to</small></p>
                                        <div class="d-grid date-card border grid-weeks-disaply">
                                            <button type="button" class="btn btn-light btn-sm rounded-0">Previous
                                                Period</button>
                                            <button type="button" class="btn btn-light btn-sm rounded-0">Previous
                                                Year</button>
                                        </div>
                                        <div class="pt-3 text-center">
                                            <button type="button" class="btn btn-primary py-2 px-4 ">Update</button>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="tab-pane fade me-2" id="nav-custom" role="tabpanel" 
                                    aria-labelledby="nav-custom-tab">
                                 
                                    <label class="form-label" for="timepicker2">Select Time Range</label>

                                    <input class="form-control datetimepicker flatpickr-input mb-4  w-80 mx-1" id="timepicker2"
                                        type="text" placeholder="d/m/y to d/m/y"
                                        data-options="{&quot;mode&quot;:&quot;range&quot;,&quot;dateFormat&quot;:&quot;d/m/y&quot;,&quot;disableMobile&quot;:true}"
                                        readonly="readonly">
                                </div>

                       
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>


        <section class="performance">
            <div class="container">
                <div class="row mb-2">
                    <div class="col-6">
                        <h3 class="w-line">Performance</h3>
                    </div>
                    <div class="col-6 text-end">
                        <i class="fas fa-ellipsis-v"></i>
                    </div>
                </div>
                <div class="boxes d-grid">
                    {% for performance in performance %}
                    <div class=" bg-white ps-4 pt-4 pb-4 pe-4">
                        <p class="mb-3">{{performance.label}}</p>
                        <div class="row">
                            <div class="col-9">
                                <h3>{{performance.value}} AED</h3>
                            </div>
                            <div class="col-3">
                                <button type="button" class="btn btn-success btn-sm">{{performance.percentage}}%</button>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </section>
    
    
        <section class="charts p-0 mb-4">
            <div class="container">
                <div class="row mb-2">
                    <div class="col-6">
                        <h3 class="w-line">Charts</h3>
                    </div>
                    <div class="col-6 text-end">
                        <i class="fas fa-ellipsis-v"></i>
                    </div>
                </div>
                <div class="chart">
                    <div class="row">
                        <div class="col-lg-6 border">
                            <div class="bg-white pt-3 pb-3 border-bottom">
                                <div class="container">
                                    Net sales
                                </div>
                            </div>
                            <div class="chat-container bg-white">
                                <canvas id="netSalesChart" width="400" height="200"></canvas>
                                <div class="chart-bottom p-4 border-top">
                                    <a href="#">
                                        <div class="d-flex justify-content-between pb-2">
                                            <div><i class="fas fa-check-square" style="color: #005eff;"></i> Month to date (Sep 1 - 30, 2024)</div>
                                            <div><b>6,912.10 AED</b></div>
                                        </div>
                                    </a>
                                    <a href="#">
                                        <div class="d-flex justify-content-between">
                                            <div><i class="fas fa-check-square" style="color: #009e54;"></i> Previous year (Sep 1 - 30, 2023)</div>
                                            <div><b>6,406.60 AED</b></div>
                                        </div>
                                    </a>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6 border">
                            <div class="bg-white pt-3 pb-3 border-bottom">
                                <div class="container">
                                    Orders
                                </div>
                            </div>
                            <div class="chat-container bg-white">
                                <canvas id="ordersChart" width="400" height="200"></canvas>
                                <div class="chart-bottom p-4 border-top">
                                    <a href="#">
                                        <div class="d-flex justify-content-between pb-2">
                                            <div><i class="fas fa-check-square" style="color: #005eff;"></i> Month to date (Sep 1 - 30, 2024)</div>
                                            <div><b>6,912.10 AED</b></div>
                                        </div>
                                    </a>
                                    <a href="#">
                                        <div class="d-flex justify-content-between">
                                            <div><i class="fas fa-check-square" style="color: #009e54;"></i> Previous year (Sep 1 - 30, 2023)</div>
                                            <div><b>6,406.60 AED</b></div>
                                        </div>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    
    
        <section class="charts p-0 mb-4">
            <div class="container">
                <div class="row mb-2">
                    <div class="col-6">
                        <h3 class="w-line">Leaderboards</h3>
                    </div>
                    <div class="col-6 text-end">
                        <i class="fas fa-ellipsis-v"></i>
                    </div>
                </div>
                <div class="chart">
                    <div class="row">
                        <div class="col-lg-6 border">
                            <div class="bg-white pt-3 pb-3 border-bottom">
                                <div class="container">
                                    Top categories - Items sold
                                </div>
                            </div>
                            <div class="chat-container bg-white">
                                <table class="table chart-table w-100">
                                    <thead>
                                        <tr>
                                            <th scope="col">Category</th>
                                            <th scope="col">Item Sold</th>
                                            <th scope="col">Net Sales</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% if category_sales %}
                                    {% for category_sale in category_sales %}
                                    <tr class="align-items-center">
                                      <td class="ps-4">{{category_sale.product_id__categories__name}}</td>
                                      <td class="ps-4">{{category_sale.total_items_sold}}</td>
                                      <td class="ps-4">{{category_sale.total_sales_amount}} AED</td>
                                      
                                    </tr>    
                                    {% endfor %}
                                    {% else %}
                                    <tr>
                                        <td></td>
                                        <td>No Data Available!.</td>
                                        <td></td>
                                    </tr>
                                    {% endif %}    
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="col-lg-6 border">
                            <div class="bg-white pt-3 pb-3 border-bottom">
                                <div class="container">
                                    Top products - Items sold
                                </div>
                            </div>
                            <div class="chat-container bg-white">
                                <table class="table chart-table w-100">
                                    <thead>
                                        <tr>
                                            <th scope="col">Product</th>
                                            <th scope="col">Item Sold</th>
                                            <th scope="col">Net Sales</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% if top_products %}
                                    {% for top_product in top_products %}
                                    <tr>
                                      <td class="ps-4">{{top_product.product_id__name}}</td>
                                      <td class="ps-4">{{top_product.times_sold}}</td>
                                      <td class="ps-4">{{top_product.net_sales_amount}}</td>
                                    </tr>   
                                    {% endfor %}   
                                    {% else %}
                                    <tr>
                                        <td></td>
                                        <td>No Data Available!.</td>
                                        <td></td>
                                    </tr>
                                    {% endif %}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
       
    
        

    </div>
    </div>
</main>


<script>
    function toggleDropdown() {
        var dropdown = document.getElementById("dateRangeContainer");
        if (dropdown.classList.contains("d-none")) {
            dropdown.classList.remove("d-none");
        } else {
            dropdown.classList.add("d-none");
        }
    }
</script>
<!-- <script>
    // Net Sale
    const netSalesCtx = document.getElementById('netSalesChart').getContext('2d');
    const netSalesChart = new Chart(netSalesCtx, {
        type: 'line',
        data: {
            labels: {{ sales_orders.chart_labels | safe }},
    datasets: [
        {
            label: 'Month to date (Sep 1 - 30, 2024)',
            data: {{ sales_orders.sales_values | safe }},
        borderColor: 'blue',
        fill: false,
        tension: 0  // Sharp lines
                },
        {
            label: 'Previous year (Sep 1 - 30, 2023)',
            data: [1000, 1300, 1700, 1500, 2100],
            borderColor: 'green',
            fill: false,
            tension: 0  // Sharp lines
        }
    ]
        },
    options: {
        scales: {
            y: {
                beginAtZero: true,
                    title: {
                    display: true,
                        text: 'Net Sales (AED)'
                }
            },
            x: {
                title: {
                    display: true,
                        text: 'Date'
                }
            }
        }
    }
    });


    // Orders
    const ordersCtx = document.getElementById('ordersChart').getContext('2d');
    const ordersChart = new Chart(ordersCtx, {
        type: 'line',
        data: {
            labels: {{ sales_orders.chart_labels | safe }},
    datasets: [
        {
            label: 'Month to date (Sep 1 - 30, 2024)',
            data: {{ sales_orders.order_values | safe }},
        borderColor: 'blue',
        fill: false,
        tension: 0  // Sharp lines
                },
        {
            label: 'Previous year (Sep 1 - 30, 2023)',
            data: [3, 6, 5, 8, 7],
            borderColor: 'green',
            fill: false,
            tension: 0  // Sharp lines
        }
    ]
        },
    options: {
        scales: {
            y: {
                beginAtZero: true,
                    title: {
                    display: true,
                        text: 'Orders'
                }
            },
            x: {
                title: {
                    display: true,
                        text: 'Date'
                }
            }
        }
    }
    });



</script> -->

<script>
    // Net Sale
    const netSalesCtx = document.getElementById('netSalesChart').getContext('2d');
    const netSalesChart = new Chart(netSalesCtx, {
        type: 'line',
        data: {
            labels: {{ sales_orders.chart_labels|safe }},
            datasets: [
                {
                    label: 'Month to date (Sep 1 - 30, 2024)',
                    data: {{ sales_orders.sales_values|safe }},
                    borderColor: 'blue',
                    fill: false,
                    tension: 0  // Sharp lines
                },
                {
                    label: 'Previous year (Sep 1 - 30, 2023)',
                    data: [1000, 1300, 1700, 1500, 2100],
                    borderColor: 'green',
                    fill: false,
                    tension: 0  // Sharp lines
                }
            ]
        },
        options: {
            scales: {
                y: {
                    beginAtZero: true,
                    title: {
                        display: true,
                        text: 'Net Sales (AED)'
                    }
                },
                x: {
                    title: {
                        display: true,
                        text: 'Date'
                    }
                }
            }
        }
    });


    // Orders
    const ordersCtx = document.getElementById('ordersChart').getContext('2d');
    const ordersChart = new Chart(ordersCtx, {
        type: 'line',
        data: {
            labels: {{ sales_orders.chart_labels|safe }},
            datasets: [
                {
                    label: 'Month to date (Sep 1 - 30, 2024)',
                    data: {{ sales_orders.order_values|safe }},
                    borderColor: 'blue',
                    fill: false,
                    tension: 0  // Sharp lines
                },
                {
                    label: 'Previous year (Sep 1 - 30, 2023)',
                    data: [3, 6, 5, 8, 7],
                    borderColor: 'green',
                    fill: false,
                    tension: 0  // Sharp lines
                }
            ]
        },
        options: {
            scales: {
                y: {
                    beginAtZero: true,
                    title: {
                        display: true,
                        text: 'Orders'
                    }
                },
                x: {
                    title: {
                        display: true,
                        text: 'Date'
                    }
                }
            }
        }
    });

    document.addEventListener('DOMContentLoaded', function() {
    // Initialize flatpickr with date range mode, but don't open it automatically
    const dateRangePicker = flatpickr("#dateRangePicker", {
        mode: "range",
        dateFormat: "m/d/Y",
        clickOpens: false, // Disable input field focus
        onClose: function(selectedDates, dateStr, instance) {
            // Handle date range selection
            console.log("Selected Dates: ", selectedDates);
            console.log("Date Range String: ", dateStr);
        }
    });

    // Handle icon click to toggle the div with tabs visibility, icon rotation, and open date picker
    document.getElementById('calendar-icon').addEventListener('click', function() {
        const container = document.getElementById('dateRangeContainer');
        const icon = document.getElementById('calendar-icon');

        // Toggle container visibility
        if (container.classList.contains('visible')) {
            container.classList.remove('visible');
            icon.classList.remove('rotate'); // Reset icon rotation
        } else {
            container.classList.add('visible');
            icon.classList.add('rotate'); // Rotate icon 180 degrees
        }
    });

    // Bootstrap tab handling - Show relevant content for Presets and Custom
    const navPresets = document.getElementById('nav-presets-tab');
    const navCustom = document.getElementById('nav-custom-tab');

    navPresets.addEventListener('click', function() {
        // Close the calendar if it's open
        dateRangePicker.close();
    });

    navCustom.addEventListener('click', function() {
        // Open the calendar
        dateRangePicker.open();
    });
});
</script>


{% endblock %}











